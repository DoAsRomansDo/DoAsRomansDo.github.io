<!DOCTYPE html>
<html style="display: none;" lang="zh">
    <head><meta name="generator" content="Hexo 3.9.0">
    <meta charset="utf-8">
    <!--
        © Material Theme
        https://github.com/viosey/hexo-theme-material
        Version: 1.5.0 -->
    <script>
        window.materialVersion = "1.5.0"
        // Delete localstorage with these tags
        window.oldVersion = [
            'codestartv1',
            '1.3.4',
            '1.4.0',
            '1.4.0b1'
        ]
    </script>

    <!-- dns prefetch -->
    <meta http-equiv="x-dns-prefetch-control" content="on">














    <!-- Title -->
    
    <title>
        
            在Ubuntu安装镜像中添加软件包 | 
        
        Roman&#39;s blog
    </title>

    <!-- Meta & Info -->
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#0097A7">
    <meta name="author" content="Roman">
    <meta name="description" itemprop="description" content>
    <meta name="keywords" content=",linux,Ubuntu">

    <!-- Import lsloader -->
    <script>(function(){window.lsloader={jsRunSequence:[],jsnamemap:{},cssnamemap:{}};lsloader.removeLS=function(key){try{localStorage.removeItem(key)}catch(e){}};lsloader.setLS=function(key,val){try{localStorage.setItem(key,val)}catch(e){}};lsloader.getLS=function(key){var val="";try{val=localStorage.getItem(key)}catch(e){val=""}return val};versionString="/*"+(window.materialVersion||"unknownVersion")+"*/";lsloader.clean=function(){try{var keys=[];for(var i=0;i<localStorage.length;i++){keys.push(localStorage.key(i))}keys.forEach(function(key){var data=lsloader.getLS(key);if(window.oldVersion){var remove=window.oldVersion.reduce(function(p,c){return p||data.indexOf("/*"+c+"*/")!==-1},false);if(remove){lsloader.removeLS(key)}}})}catch(e){}};lsloader.clean();lsloader.load=function(jsname,jspath,cssonload,isJs){if(typeof cssonload==="boolean"){isJs=cssonload;cssonload=undefined}isJs=isJs||false;cssonload=cssonload||function(){};var code;code=this.getLS(jsname);if(code&&code.indexOf(versionString)===-1){this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload,isJs);return}if(code){var versionNumber=code.split(versionString)[0];if(versionNumber!=jspath){console.log("reload:"+jspath);this.removeLS(jsname);this.requestResource(jsname,jspath,cssonload,isJs);return}code=code.split(versionString)[1];if(isJs){this.jsRunSequence.push({name:jsname,code:code});this.runjs(jspath,jsname,code)}else{document.getElementById(jsname).appendChild(document.createTextNode(code));cssonload()}}else{this.requestResource(jsname,jspath,cssonload,isJs)}};lsloader.requestResource=function(name,path,cssonload,isJs){var that=this;if(isJs){this.iojs(path,name,function(path,name,code){that.setLS(name,path+versionString+code);that.runjs(path,name,code)})}else{this.iocss(path,name,function(code){document.getElementById(name).appendChild(document.createTextNode(code));that.setLS(name,path+versionString+code)},cssonload)}};lsloader.iojs=function(path,jsname,callback){var that=this;that.jsRunSequence.push({name:jsname,code:""});try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(path,jsname,xhr.response);return}}that.jsfallback(path,jsname)}};xhr.send(null)}catch(e){that.jsfallback(path,jsname)}};lsloader.iocss=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.iofonts=function(path,jsname,callback,cssonload){var that=this;try{var xhr=new XMLHttpRequest;xhr.open("get",path,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){callback(xhr.response);cssonload();return}}that.cssfallback(path,jsname,cssonload)}};xhr.send(null)}catch(e){that.cssfallback(path,jsname,cssonload)}};lsloader.runjs=function(path,name,code){if(!!name&&!!code){for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code=code}}}if(!!this.jsRunSequence[0]&&!!this.jsRunSequence[0].code&&this.jsRunSequence[0].status!="failed"){var script=document.createElement("script");script.appendChild(document.createTextNode(this.jsRunSequence[0].code));script.type="text/javascript";document.getElementsByTagName("head")[0].appendChild(script);this.jsRunSequence.shift();if(this.jsRunSequence.length>0){this.runjs()}}else if(!!this.jsRunSequence[0]&&this.jsRunSequence[0].status=="failed"){var that=this;var script=document.createElement("script");script.src=this.jsRunSequence[0].path;script.type="text/javascript";this.jsRunSequence[0].status="loading";script.onload=function(){that.jsRunSequence.shift();if(that.jsRunSequence.length>0){that.runjs()}};document.body.appendChild(script)}};lsloader.tagLoad=function(path,name){this.jsRunSequence.push({name:name,code:"",path:path,status:"failed"});this.runjs()};lsloader.jsfallback=function(path,name){if(!!this.jsnamemap[name]){return}else{this.jsnamemap[name]=name}for(var k in this.jsRunSequence){if(this.jsRunSequence[k].name==name){this.jsRunSequence[k].code="";this.jsRunSequence[k].status="failed";this.jsRunSequence[k].path=path}}this.runjs()};lsloader.cssfallback=function(path,name,cssonload){if(!!this.cssnamemap[name]){return}else{this.cssnamemap[name]=1}var link=document.createElement("link");link.type="text/css";link.href=path;link.rel="stylesheet";link.onload=link.onerror=cssonload;var root=document.getElementsByTagName("script")[0];root.parentNode.insertBefore(link,root)};lsloader.runInlineScript=function(scriptId,codeId){var code=document.getElementById(codeId).innerText;this.jsRunSequence.push({name:scriptId,code:code});this.runjs()};lsloader.loadCombo=function(jslist){var updateList="";var requestingModules={};for(var k in jslist){var LS=this.getLS(jslist[k].name);if(!!LS){var version=LS.split(versionString)[0];var code=LS.split(versionString)[1]}else{var version=""}if(version==jslist[k].path){this.jsRunSequence.push({name:jslist[k].name,code:code,path:jslist[k].path})}else{this.jsRunSequence.push({name:jslist[k].name,code:null,path:jslist[k].path,status:"comboloading"});requestingModules[jslist[k].name]=true;updateList+=(updateList==""?"":";")+jslist[k].path}}var that=this;if(!!updateList){var xhr=new XMLHttpRequest;xhr.open("get",combo+updateList,true);xhr.onreadystatechange=function(){if(xhr.readyState==4){if(xhr.status>=200&&xhr.status<300||xhr.status==304){if(xhr.response!=""){that.runCombo(xhr.response,requestingModules);return}}else{for(var i in that.jsRunSequence){if(requestingModules[that.jsRunSequence[i].name]){that.jsRunSequence[i].status="failed"}}that.runjs()}}};xhr.send(null)}this.runjs()};lsloader.runCombo=function(comboCode,requestingModules){comboCode=comboCode.split("/*combojs*/");comboCode.shift();for(var k in this.jsRunSequence){if(!!requestingModules[this.jsRunSequence[k].name]&&!!comboCode[0]){this.jsRunSequence[k].status="comboJS";this.jsRunSequence[k].code=comboCode[0];this.setLS(this.jsRunSequence[k].name,this.jsRunSequence[k].path+versionString+comboCode[0]);comboCode.shift()}}this.runjs()}})();</script>

    <!-- Import queue -->
    <script>function Queue(){this.dataStore=[];this.offer=b;this.poll=d;this.execNext=a;this.debug=false;this.startDebug=c;function b(e){if(this.debug){console.log("Offered a Queued Function.")}if(typeof e==="function"){this.dataStore.push(e)}else{console.log("You must offer a function.")}}function d(){if(this.debug){console.log("Polled a Queued Function.")}return this.dataStore.shift()}function a(){var e=this.poll();if(e!==undefined){if(this.debug){console.log("Run a Queued Function.")}e()}}function c(){this.debug=true}}var queue=new Queue();</script>

    <!-- Favicons -->
    <link rel="icon shortcut" type="image/ico" href="/img/favicon.png">
    <link rel="icon" sizes="192x192" href="/img/favicon.png">
    <link rel="apple-touch-icon" href="/img/favicon.png">

    <!--iOS -->
    <meta name="apple-mobile-web-app-title" content="Title">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="HandheldFriendly" content="True">
    <meta name="MobileOptimized" content="480">

    <!-- Add to homescreen for Chrome on Android -->
    <meta name="mobile-web-app-capable" content="yes">

    <!-- Add to homescreen for Safari on iOS -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Roman&#39;s blog">

    <!-- Site Verification -->
    
    

    <!-- RSS -->
    
        
            <link rel="alternate" type="application/rss+xml" href="/rss2.xml">
        
    

    <!--[if lte IE 9]>
        <link rel="stylesheet" href="/css/ie-blocker.css">

        
            <script src="/js/ie-blocker.zhCN.js"></script>
        
    <![endif]-->

    <!-- Import CSS -->
    
        <style id="material_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("material_css","/css/material.min.css?Z7a72R1E4SxzBKR/WGctOA==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
        <style id="style_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("style_css","/css/style.min.css?MKetZV3cUTfDxvMffaOezg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>

        
            
                <style id="prettify_css"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_css","/css/prettify.min.css?zp8STOU9v89XWFEnN+6YmQ==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
                <style id="prettify_theme"></style><script>if(typeof window.lsLoadCSSMaxNums === "undefined")window.lsLoadCSSMaxNums = 0;window.lsLoadCSSMaxNums++;lsloader.load("prettify_theme","/css/prettify/github-v2.min.css?AfzKxt++K+/lhZBlSjnxwg==",function(){if(typeof window.lsLoadCSSNums === "undefined")window.lsLoadCSSNums = 0;window.lsLoadCSSNums++;if(window.lsLoadCSSNums == window.lsLoadCSSMaxNums)document.documentElement.style.display="";}, false)</script>
            
        

    

    

    <!-- Config CSS -->

<!-- Other Styles -->
<style>
  body, html {
    font-family: Roboto, "Helvetica Neue", Helvetica, "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", Arial, sans-serif;
    overflow-x: hidden !important;
  }
  
  code {
    font-family: Consolas, Monaco, 'Andale Mono', 'Ubuntu Mono', monospace;
  }

  a {
    color: #00838F;
  }

  .mdl-card__media,
  #search-label,
  #search-form-label:after,
  #scheme-Paradox .hot_tags-count,
  #scheme-Paradox .sidebar_archives-count,
  #scheme-Paradox .sidebar-colored .sidebar-header,
  #scheme-Paradox .sidebar-colored .sidebar-badge{
    background-color: #0097A7 !important;
  }

  /* Sidebar User Drop Down Menu Text Color */
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:hover,
  #scheme-Paradox .sidebar-colored .sidebar-nav>.dropdown>.dropdown-menu>li>a:focus {
    color: #0097A7 !important;
  }

  #post_entry-right-info,
  .sidebar-colored .sidebar-nav li:hover > a,
  .sidebar-colored .sidebar-nav li:hover > a i,
  .sidebar-colored .sidebar-nav li > a:hover,
  .sidebar-colored .sidebar-nav li > a:hover i,
  .sidebar-colored .sidebar-nav li > a:focus i,
  .sidebar-colored .sidebar-nav > .open > a,
  .sidebar-colored .sidebar-nav > .open > a:hover,
  .sidebar-colored .sidebar-nav > .open > a:focus,
  #ds-reset #ds-ctx .ds-ctx-entry .ds-ctx-head a {
    color: #0097A7 !important;
  }

  .toTop {
    background: #757575 !important;
  }

  .material-layout .material-post>.material-nav,
  .material-layout .material-index>.material-nav,
  .material-nav a {
    color: #757575;
  }

  #scheme-Paradox .MD-burger-layer {
    background-color: #757575;
  }

  #scheme-Paradox #post-toc-trigger-btn {
    color: #757575;
  }

  .post-toc a:hover {
    color: #00838F;
    text-decoration: underline;
  }

</style>


<!-- Theme Background Related-->

    <style>
      body{
        background-color: #F5F5F5;
      }

      /* blog_info bottom background */
      #scheme-Paradox .material-layout .something-else .mdl-card__supporting-text{
        background-color: #fff;
      }
    </style>




<!-- Fade Effect -->

    <style>
      .fade {
        transition: all 800ms linear;
        -webkit-transform: translate3d(0,0,0);
        -moz-transform: translate3d(0,0,0);
        -ms-transform: translate3d(0,0,0);
        -o-transform: translate3d(0,0,0);
        transform: translate3d(0,0,0);
        opacity: 1;
      }

      .fade.out{
        opacity: 0;
      }
    </style>


<!-- Import Font -->
<!-- Import Roboto -->

    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,500" rel="stylesheet">


<!-- Import Material Icon -->

    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">




    <!-- Import jQuery -->
    
        <script>lsloader.load("jq_js","/js/jquery.min.js?qcusAULNeBksqffqUM2+Ig==", true)</script>
    

    <!-- The Open Graph protocol -->
    <meta property="og:url" content="http://romanarcher.github.io">
    <meta property="og:type" content="blog">
    <meta property="og:title" content="在Ubuntu安装镜像中添加软件包 | Roman&#39;s blog">
    <meta property="og:image" content="http://romanarcher.github.io/img/favicon.png">
    <meta property="og:description" content>
    <meta property="og:article:tag" content="linux"> <meta property="og:article:tag" content="Ubuntu"> 

    
        <meta property="article:published_time" content="Mon Nov 11 2019 15:54:42 GMT+0800">
        <meta property="article:modified_time" content="Wed Nov 13 2019 16:10:00 GMT+0800">
    

    <!-- The Twitter Card protocol -->
    <meta name="twitter:title" content="在Ubuntu安装镜像中添加软件包 | Roman&#39;s blog">
    <meta name="twitter:description" content>
    <meta name="twitter:image" content="http://romanarcher.github.io/img/favicon.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:url" content="http://romanarcher.github.io">

    <!-- Add canonical link for SEO -->
    
        <link rel="canonical" href="http://romanarcher.github.io/post/6a6ee787.html">
    

    <!-- Structured-data for SEO -->
    
        


<script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "BlogPosting",
    "mainEntityOfPage": "http://romanarcher.github.io/post/6a6ee787.html",
    "headline": "在Ubuntu安装镜像中添加软件包",
    "datePublished": "Mon Nov 11 2019 15:54:42 GMT+0800",
    "dateModified": "Wed Nov 13 2019 16:10:00 GMT+0800",
    "author": {
        "@type": "Person",
        "name": "Roman",
        "image": {
            "@type": "ImageObject",
            "url": "/img/avatar.png"
        },
        "description": "Hi, nice to meet you"
    },
    "publisher": {
        "@type": "Organization",
        "name": "Roman&#39;s blog",
        "logo": {
            "@type":"ImageObject",
            "url": "/img/favicon.png"
        }
    },
    "keywords": ",linux,Ubuntu",
    "description": "",
}
</script>


    

    <!-- Analytics -->
    
    
    

    <!-- Custom Head -->
    

</head>


    
        <body id="scheme-Paradox" class="lazy">
            <div class="material-layout  mdl-js-layout has-drawer is-upgraded">
                

                <!-- Main Container -->
                <main class="material-layout__content" id="main">

                    <!-- Top Anchor -->
                    <div id="top"></div>

                    
                        <!-- Hamburger Button -->
                        <button class="MD-burger-icon sidebar-toggle">
                            <span class="MD-burger-layer"></span>
                        </button>
                    

                    <!-- Post TOC -->

    
    <!-- Back Button -->
    <!--
    <div class="material-back" id="backhome-div" tabindex="0">
        <a class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon"
           href="#" onclick="window.history.back();return false;"
           target="_self"
           role="button"
           data-upgraded=",MaterialButton,MaterialRipple">
            <i class="material-icons" role="presentation">arrow_back</i>
            <span class="mdl-button__ripple-container">
                <span class="mdl-ripple"></span>
            </span>
        </a>
    </div>
    -->


    <!-- Left aligned menu below button -->
    
    
    <button id="post-toc-trigger-btn"
        class="mdl-button mdl-js-button mdl-button--icon">
        <i class="material-icons">format_list_numbered</i>
    </button>

    <ul class="post-toc-wrap mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect" for="post-toc-trigger-btn" style="max-height:80vh; overflow-y:scroll;">
        <ol class="post-toc"><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#简介"><span class="post-toc-number">1.</span> <span class="post-toc-text">简介</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#1-拷贝镜像内容到硬盘上"><span class="post-toc-number">2.</span> <span class="post-toc-text">1.拷贝镜像内容到硬盘上</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#2-创建extras组件"><span class="post-toc-number">3.</span> <span class="post-toc-text">2.创建extras组件</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#3-生成新的ubuntu-keyring-deb来对你的CD进行签名"><span class="post-toc-number">4.</span> <span class="post-toc-text">3.生成新的ubuntu-keyring.deb来对你的CD进行签名</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#4-生成新的filesystem-squashfs"><span class="post-toc-number">5.</span> <span class="post-toc-text">4.生成新的filesystem.squashfs</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#5-使用apt-ftparchive来构建仓库"><span class="post-toc-number">6.</span> <span class="post-toc-text">5.使用apt-ftparchive来构建仓库</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#6-编辑seed文件来安装"><span class="post-toc-number">7.</span> <span class="post-toc-text">6.编辑seed文件来安装</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#7-生成iso"><span class="post-toc-number">8.</span> <span class="post-toc-text">7.生成iso</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#后记"><span class="post-toc-number">9.</span> <span class="post-toc-text">后记</span></a></li><li class="post-toc-item post-toc-level-2"><a class="post-toc-link" href="#附录"><span class="post-toc-number">10.</span> <span class="post-toc-text">附录</span></a><ol class="post-toc-child"><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#A-镜像安装时如何调试"><span class="post-toc-number">10.1.</span> <span class="post-toc-text">A.镜像安装时如何调试</span></a></li><li class="post-toc-item post-toc-level-3"><a class="post-toc-link" href="#B-ubuntu版本以及名称对应"><span class="post-toc-number">10.2.</span> <span class="post-toc-text">B.ubuntu版本以及名称对应</span></a></li></ol></li></ol>
    </ul>
    




<!-- Layouts -->

    <!-- Post Module -->
    <div class="material-post_container">

        <div class="material-post mdl-grid">
            <div class="mdl-card mdl-shadow--4dp mdl-cell mdl-cell--12-col">

                <!-- Post Header(Thumbnail & Title) -->
                
    <!-- Paradox Post Header -->
    
        
            <!-- Random Thumbnail -->
            <div class="post_thumbnail-random mdl-card__media mdl-color-text--grey-50">
            <script type="text/ls-javascript" id="post-thumbnail-script">
    var randomNum = Math.floor(Math.random() * 19 + 1);

    $('.post_thumbnail-random').attr('data-original', '/img/random/material-' + randomNum + '.png');
    $('.post_thumbnail-random').addClass('lazy');
</script>

        
    
            <p class="article-headline-p">
                在Ubuntu安装镜像中添加软件包
            </p>
        </div>





                
                    <!-- Paradox Post Info -->
                    <div class="mdl-color-text--grey-700 mdl-card__supporting-text meta">

    <!-- Author Avatar -->
    <div id="author-avatar">
        <img src="/img/avatar.png" width="44px" height="44px" alt="Author Avatar"/>
    </div>
    <!-- Author Name & Date -->
    <div>
        <strong>Roman</strong>
        <span>11月 11, 2019</span>
    </div>

    <div class="section-spacer"></div>

    <!-- Favorite -->
    <!--
        <button id="article-functions-like-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon btn-like">
            <i class="material-icons" role="presentation">favorite</i>
            <span class="visuallyhidden">favorites</span>
        </button>
    -->

    <!-- Qrcode -->
    

    <!-- Tags (bookmark) -->
    
    <button id="article-functions-viewtags-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
        <i class="material-icons" role="presentation">bookmark</i>
        <span class="visuallyhidden">bookmark</span>
    </button>
    <ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-functions-viewtags-button">
        <li class="mdl-menu__item">
        <a class="post_tag-link" href="/tags/Ubuntu/">Ubuntu</a></li><li class="mdl-menu__item"><a class="post_tag-link" href="/tags/linux/">linux</a>
    </ul>
    

    <!-- Share -->
    <button id="article-fuctions-share-button" class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon">
    <i class="material-icons" role="presentation">share</i>
    <span class="visuallyhidden">share</span>
</button>
<ul class="mdl-menu mdl-menu--bottom-right mdl-js-menu mdl-js-ripple-effect" for="article-fuctions-share-button">
    

    

    <!-- Share Weibo -->
    
        <a class="post_share-link" href="http://service.weibo.com/share/share.php?appkey=&title=在Ubuntu安装镜像中添加软件包&url=http://romanarcher.github.io/post/6a6ee787.html&pic=http://romanarcher.github.io/img/favicon.png&searchPic=false&style=simple" target="_blank">
            <li class="mdl-menu__item">
                分享到微博
            </li>
        </a>
    

    <!-- Share Twitter -->
    
        <a class="post_share-link" href="https://twitter.com/intent/tweet?text=在Ubuntu安装镜像中添加软件包&url=http://romanarcher.github.io/post/6a6ee787.html&via=Roman" target="_blank">
            <li class="mdl-menu__item">
                分享到 Twitter
            </li>
        </a>
    

    <!-- Share Facebook -->
    
        <a class="post_share-link" href="https://www.facebook.com/sharer/sharer.php?u=http://romanarcher.github.io/post/6a6ee787.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Facebook
            </li>
        </a>
    

    <!-- Share Google+ -->
    
        <a class="post_share-link" href="https://plus.google.com/share?url=http://romanarcher.github.io/post/6a6ee787.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 Google+
            </li>
        </a>
    

    <!-- Share LinkedIn -->
    

    <!-- Share QQ -->
    
        <a class="post_share-link" href="http://connect.qq.com/widget/shareqq/index.html?site=Roman&#39;s blog&title=在Ubuntu安装镜像中添加软件包&summary=&pics=http://romanarcher.github.io/img/favicon.png&url=http://romanarcher.github.io/post/6a6ee787.html" target="_blank">
            <li class="mdl-menu__item">
                分享到 QQ
            </li>
        </a>
    

    <!-- Share Telegram -->
    
</ul>

</div>

                

                <!-- Post Content -->
                <div id="post-content" class="mdl-color-text--grey-700 mdl-card__supporting-text fade out">
    
        <h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p>本教程是在ubuntu16.04 desktop amd64上进行编辑。<br>镜像为ubuntu16.04 server amd64。<br>参考地址：<br><a href="https://help.ubuntu.com/community/InstallCDCustomization?action=show&redirect=InstallCDCustomizationHowTo" target="_blank" rel="noopener">InstallCDCustomization</a><br><a href="https://help.ubuntu.com/community/LiveCDCustomization" target="_blank" rel="noopener">LiveCDCustomization</a><br><a href="https://wiki.ubuntu.com/定制Ubuntu安装CD" target="_blank" rel="noopener">定制Ubuntu安装CD</a></p>
<p>这里对接下来使用的一些变量进行说明</p>
<pre><code class="bash">$isopath        #iso文件的路径
$mountpoint     #将iso挂载的点
$imagepath      #将iso文件复制到的目录
$keybuild       #构建ubuntu-keyring包的位置
$yourkeyid      #你自己生成的key
$indicesDir     #下载的indice文件
$DIST           #ubuntu的开发代号,使用第一个单词，比如16.04为xenial
$version        #ubuntu的版本号
$aptftparchiveconf  #存放apt-ftparchive配置文件的目录
$APTCONF        #release.conf的位置</code></pre>
<h2 id="1-拷贝镜像内容到硬盘上"><a href="#1-拷贝镜像内容到硬盘上" class="headerlink" title="1.拷贝镜像内容到硬盘上"></a>1.拷贝镜像内容到硬盘上</h2><p>挂载镜像</p>
<pre><code class="bash">mount -o loop $isopath $mountpoint</code></pre>
<p>使用rsync复制文件到硬盘</p>
<pre><code class="bash">rsync -av $mountpoint $imagepath</code></pre>
<p>或者直接使用cp命令拷贝</p>
<pre><code class="bash">mkdir -p $imagepath
cp -a $mountpoint $imagepath</code></pre>
<ul>
<li>注意在复制完后查看一下，是否.disk也复制过去了，如果没有，最终镜像安装会出现这不是一张UbuntuCD的警告。</li>
</ul>
<h2 id="2-创建extras组件"><a href="#2-创建extras组件" class="headerlink" title="2.创建extras组件"></a>2.创建extras组件</h2><pre><code class="bash">cd $imagepath
mkdir -p pool/extras/</code></pre>
<p>把你想要安装的.deb包都放到pool/extras/目录下。</p>
<h2 id="3-生成新的ubuntu-keyring-deb来对你的CD进行签名"><a href="#3-生成新的ubuntu-keyring-deb来对你的CD进行签名" class="headerlink" title="3.生成新的ubuntu-keyring.deb来对你的CD进行签名"></a>3.生成新的ubuntu-keyring.deb来对你的CD进行签名</h2><p>我们需要使用GPG来对release文件进行签名，安装系统会根据所持有的Ubuntu-keyring包来对公钥签名进行验证。<br>为了完成密钥的生成你需要下载gpg包。<br>签名密钥生成的命令</p>
<pre><code class="bash">gpg --gen-key</code></pre>
<p>一切都按默认的来就行，不过教程上种类使用的是DSA and Elgamal，因此我也采用了这个种类。<br>列出key</p>
<pre><code class="bash">gpg --list-keys
pub   1024D/437D05B5 2006-09-08
uid                  XXX Signing Key &lt;packages@xxx.example.org&gt;
sub   2048g/79164387 2006-09-08</code></pre>
<p>你也可以在–list-keys 后面加参数来查找相关的key</p>
<p>生成完密钥后，构建包含自己密钥的ubuntu-keyring包</p>
<pre><code class="bash">cd $keybuild
sudo apt-get install fakeroot   
apt-get source ubuntu-keyring
cd ubuntu-keyring-2012.05.19/keyrings
gpg --import &lt; ubuntu-archive-keyring.gpg
gpg --list-keys &quot;你的key的名字或者邮箱&quot;
gpg --export FBB75451 437D05B5 C0B21F32 EFE21092 $yourkeyid &gt; ubuntu-archive-keyring.gpg
cd ..    # 现在处于ubuntu-keyring-2012.05.19目录中
dpkg-buildpackage -rfakeroot -m&quot;Your Name &lt;your.email@your.host&gt;&quot; -k$yourkeyid
cd ..  # 现在处于$keybuild中
cp ubuntu-keyring*deb $imagepath/pool/main/u/ubuntu-keyring</code></pre>
<ul>
<li>dpkg-buildpackage会去root下面寻找你的key，所以推荐这些过程以root账号运行。</li>
</ul>
<h2 id="4-生成新的filesystem-squashfs"><a href="#4-生成新的filesystem-squashfs" class="headerlink" title="4.生成新的filesystem.squashfs"></a>4.生成新的filesystem.squashfs</h2><p>解开filesystem.squashfs</p>
<pre><code class="bash">cd $imagepath
unsquashfs install/filesystem.squashfs</code></pre>
<p>这个时DIST在install目录下会出现squashfs-root目录<br>将你的kDISTy导入到相应的目录</p>
<pre><code class="bash">cd $imaDISTepath/install/squashfs-root
gpg --export FBB75451 437D05B5 C0B21F32 EFE21092 $yourkeyid &gt; /usr/share/keyrings/ubuntu-archive-keyring.gpg 
gpg --export FBB75451 437D05B5 C0B21F32 EFE21092 $yourkeyid &gt; /etc/apt/trusted.gpg 
gpg --export FBB75451 437D05B5 C0B21F32 EFE21092 $yourkeyid &gt; /var/lib/apt/keyrings/ubuntu-archive-keyring.gpg </code></pre>
<p>squashfs-root应该是相当于没有安装软件和配置的ubuntu系统文件，如果你需要对ubuntu进行一些个性化配置，可以对相应文件修改，比如修改squashfs-root下的/etc/apt/sources.list来更改源之类的操作。<br>配合上chroot也可以进行更加高级的操作</p>
<p>修改完后将其大小记录到filesystem.size</p>
<pre><code class="bash">cd $imagepath/install/squashfs-root
du -sx --block-size=1 ./ | cut -f1 &gt; $imagepath/install/filesystem.size</code></pre>
<p>重新打包</p>
<pre><code class="bash">rm extract-cd/casper/filesystem.squashfs
mksquashfs edit extract-cd/casper/filesystem.squashfs -nolzma</code></pre>
<ul>
<li>-nolzma参数只适用于Hardy到Karmic版本。</li>
<li>squashfs必须使用与您正在定制的CD上使用的内核兼容的mksquashfs版本生成。例如，您不能在karmic上生成jaunty的squashfs，因为jaunty内核无法挂载使用mksquashfs从karmic准备的squashfs。</li>
</ul>
<h2 id="5-使用apt-ftparchive来构建仓库"><a href="#5-使用apt-ftparchive来构建仓库" class="headerlink" title="5.使用apt-ftparchive来构建仓库"></a>5.使用apt-ftparchive来构建仓库</h2><p>获取indices文件</p>
<pre><code class="bash">mkdir -p $indicesDir 
cd $indicesDir
DIST=$DIST
for SUFFIX in extra.main main main.debian-installer restricted restricted.debian-installer; do
  wget http://archive.ubuntu.com/ubuntu/indices/override.$DIST.$SUFFIX
done</code></pre>
<p>接下来在创建apt-ftparchive的配置文件<br>分别为apt-ftparchive-deb.conf, apt-ftparchive-udeb.conf, apt-ftparchive-extras.conf,和release.conf，放在$aptftparchiveconf目录下。</p>
<p>这里给出相关的配置文件<br>apt-ftparchive-deb.conf</p>
<pre><code class="bash">Dir {
  ArchiveDir &quot;$imagepath&quot;;
};

TreeDefault {
  Directory &quot;pool/&quot;;
};

BinDirectory &quot;pool/main&quot; {
  Packages &quot;dists/$DIST/main/binary-amd64/Packages&quot;;
  BinOverride &quot;$indicesDir/override.$DIST.main&quot;;
  ExtraOverride &quot;$indicesDir/override.$DIST.extra.main&quot;;
};

BinDirectory &quot;pool/restricted&quot; {
 Packages &quot;dists/$DIST/restricted/binary-amd64/Packages&quot;;
 BinOverride &quot;$indicesDir/override.$DIST.restricted&quot;;
};

Default {
  Packages {
    Extensions &quot;.deb&quot;;
    Compress &quot;. gzip&quot;;
  };
};

Contents {
  Compress &quot;gzip&quot;;
};</code></pre>
<p>apt-ftparchive-udeb.conf</p>
<pre><code class="bash">Dir {
  ArchiveDir &quot;$imagepath&quot;;
};

TreeDefault {
  Directory &quot;pool/&quot;;
};

BinDirectory &quot;pool/main&quot; {
  Packages &quot;dists/$DIST/main/debian-installer/binary-amd64/Packages&quot;;
  BinOverride &quot;$indicesDir/override.$DIST.main.debian-installer&quot;;
};

BinDirectory &quot;pool/restricted&quot; {
  Packages &quot;dists/$DIST/restricted/debian-installer/binary-amd64/Packages&quot;;
  BinOverride &quot;$indicesDir/override.$DIST.restricted.debian-installer&quot;;
};

Default {
  Packages {
    Extensions &quot;.udeb&quot;;
    Compress &quot;. gzip&quot;;
  };
};

Contents {
  Compress &quot;gzip&quot;;
};</code></pre>
<p>apt-ftparchive-extras.conf</p>
<pre><code class="bash">Dir {
  ArchiveDir &quot;$imagepath&quot;;
};

TreeDefault {
  Directory &quot;pool/&quot;;
};

BinDirectory &quot;pool/extras&quot; {
  Packages &quot;dists/$DIST/extras/binary-amd64/Packages&quot;;
};

Default {
  Packages {
    Extensions &quot;.deb&quot;;
    Compress &quot;. gzip&quot;;
  };
};

Contents {
  Compress &quot;gzip&quot;;
};</code></pre>
<p>release.conf</p>
<pre><code class="bash">APT::FTPArchive::Release::Origin &quot;Ubuntu&quot;;
APT::FTPArchive::Release::Label &quot;Ubuntu&quot;;
APT::FTPArchive::Release::Suite &quot;$DIST&quot;;
APT::FTPArchive::Release::Version &quot;$version&quot;;
APT::FTPArchive::Release::Codename &quot;$DIST&quot;;
APT::FTPArchive::Release::Architectures &quot;amd64&quot;;
APT::FTPArchive::Release::Components &quot;main restricted extras&quot;;
APT::FTPArchive::Release::Description &quot;xxxxxx&quot;;</code></pre>
<p>创建包的引用</p>
<pre><code class="bash">cd $imagepath
apt-ftparchive packages pool/extras &gt; dists/stable/extras/binary-amd64/Packages
gzip -c dists/stable/extras/binary-amd64/Packages | tee dists/stable/extras/binary-amd64/Packages.gz &gt; /dev/null</code></pre>
<p>开始构建仓库</p>
<pre><code class="bash">APTCONF=$aptftparchiveconf/release.conf
DIST=xenial

cd $imagepath
apt-ftparchive -c $APTCONF generate /opt/apt-ftparchive/apt-ftparchive-deb.conf
apt-ftparchive -c $APTCONF generate /opt/apt-ftparchive/apt-ftparchive-udeb.conf
apt-ftparchive -c $APTCONF generate /opt/apt-ftparchive/apt-ftparchive-extras.conf
apt-ftparchive -c $APTCONF release $imagepath/dists/$DIST &gt; $imagepath/dists/$DIST/Release</code></pre>
<p>对release文件签名</p>
<pre><code class="bash">cd $imagepath
gpg --default-key $yourkeyid --output $imagepath/dists/$DIST/Release.gpg -ba $imagepath/dists/$DIST/Release</code></pre>
<h2 id="6-编辑seed文件来安装"><a href="#6-编辑seed文件来安装" class="headerlink" title="6.编辑seed文件来安装"></a>6.编辑seed文件来安装</h2><p>生成的iso似乎不会安装extras里面的软件，这里给出一个修补的办法，修改preseed目录下的seed文件。</p>
<pre><code class="bash">chmod +w  $iamgepath/preseed/*.seed
for seed in $iamgepath/preseed/*.seed; do
        echo &quot;d-i preseed/late_command string apt-install $packagename&quot; &gt;&gt; $seed
done
chmod -w  $iamgepath/preseed/*.seed</code></pre>
<p>*软件名字似乎都是小写若安装不成功，可以在安装界面按下alt+F2进入shell脚本界面，通过以下命令来查询你的软件包的名字。</p>
<pre><code class="bash">apt-cache search package_name</code></pre>
<h2 id="7-生成iso"><a href="#7-生成iso" class="headerlink" title="7.生成iso"></a>7.生成iso</h2><p>对md5文件进行签名</p>
<pre><code class="bash">cd $imagepath
find -type f -print0 | sudo xargs -0 md5sum | grep -v isolinux/ | grep -v md5sum  |sudo tee md5sum.txt</code></pre>
<p>-b 和 -c指定的路径都是相对于$imagepath来说的，最终会$imagepath下生成iso。</p>
<pre><code class="bash">IMAGE=custom.iso

mkisofs -r -V &quot;Custom Ubuntu Install CD&quot; \
            -cache-inodes \
            -J -l -b isolinux/isolinux.bin \
            -c isolinux/boot.cat -no-emul-boot \
            -boot-load-size 4 -boot-info-table \
            -o $IMAGE $imagepath</code></pre>
<h2 id="后记"><a href="#后记" class="headerlink" title="后记"></a>后记</h2><p>这个教程只是我跟着wiki上的教程一步一步做的，有许多步骤应该是没必要的，下一节定制debian的系统，其中会有更简洁的方法。可以先按照debian的方法试试，如果通不过再看看Ubuntu的，选择一些步骤添加上。<br><a href="https://doasromansdo.github.io/post/5092e38f.html#more" target="_blank" rel="noopener">在Debian安装镜像中添加软件包</a></p>
<h2 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h2><h3 id="A-镜像安装时如何调试"><a href="#A-镜像安装时如何调试" class="headerlink" title="A.镜像安装时如何调试"></a>A.镜像安装时如何调试</h3><p>alt+F1 可以进入可视化界面，也就是正常的Ubuntu安装界面。<br>alt+F2 进入交互式shell界面，此时在isolinux内，可以通过chroot /target来进入正在安装的Ubuntu系统。<br>alt+F4 查看日志，基本知道是哪个地方安装不成功。</p>
<h3 id="B-ubuntu版本以及名称对应"><a href="#B-ubuntu版本以及名称对应" class="headerlink" title="B.ubuntu版本以及名称对应"></a>B.ubuntu版本以及名称对应</h3><table>
<thead>
<tr>
<th align="center">版本号</th>
<th align="center">开发代号</th>
<th align="center">内核版本</th>
</tr>
</thead>
<tbody><tr>
<td align="center">4.10</td>
<td align="center">Warty Warthog</td>
<td align="center">2.6.8</td>
</tr>
<tr>
<td align="center">5.04</td>
<td align="center">Hoary Hedgehog</td>
<td align="center">2.6.10</td>
</tr>
<tr>
<td align="center">5.10</td>
<td align="center">Breezy Badger</td>
<td align="center">2.6.12</td>
</tr>
<tr>
<td align="center">6.06LTS</td>
<td align="center">Dapper Drake</td>
<td align="center">2.6.15</td>
</tr>
<tr>
<td align="center">6.10</td>
<td align="center">Edgy Eft</td>
<td align="center">2.6.17</td>
</tr>
<tr>
<td align="center">7.04</td>
<td align="center">Feisty Fawn</td>
<td align="center">2.6.20</td>
</tr>
<tr>
<td align="center">7.10</td>
<td align="center">Gutsy Gibbon</td>
<td align="center">2.6.22</td>
</tr>
<tr>
<td align="center">8.04LTS</td>
<td align="center">Hardy Heron</td>
<td align="center">2.6.24</td>
</tr>
<tr>
<td align="center">8.10</td>
<td align="center">Intrepid Ibex</td>
<td align="center">2.6.27</td>
</tr>
<tr>
<td align="center">9.04</td>
<td align="center">Jaunty Jackalope</td>
<td align="center">2.6.28</td>
</tr>
<tr>
<td align="center">9.10</td>
<td align="center">Karmic Koala</td>
<td align="center">2.6.31</td>
</tr>
<tr>
<td align="center">10.04LTS</td>
<td align="center">Lucid Lynx</td>
<td align="center">2.6.32</td>
</tr>
<tr>
<td align="center">10.10</td>
<td align="center">Maverick Meerkat</td>
<td align="center">2.6.35</td>
</tr>
<tr>
<td align="center">11.04</td>
<td align="center">Natty Narwhal</td>
<td align="center">2.6.38</td>
</tr>
<tr>
<td align="center">11.10</td>
<td align="center">Oneiric Ocelot</td>
<td align="center">3.0</td>
</tr>
<tr>
<td align="center">12.04LTS</td>
<td align="center">Precise Pangolin</td>
<td align="center">3.2</td>
</tr>
<tr>
<td align="center">12.10</td>
<td align="center">Quantal Quetzal</td>
<td align="center">3.5</td>
</tr>
<tr>
<td align="center">13.04</td>
<td align="center">Raring Ringtail</td>
<td align="center">3.8</td>
</tr>
<tr>
<td align="center">13.10</td>
<td align="center">Saucy Salamander</td>
<td align="center">3.11</td>
</tr>
<tr>
<td align="center">14.04LTS</td>
<td align="center">Trusty Tahr</td>
<td align="center">3.13</td>
</tr>
<tr>
<td align="center">14.10</td>
<td align="center">Utopic Unicorn</td>
<td align="center">3.16</td>
</tr>
<tr>
<td align="center">15.04</td>
<td align="center">Vivid Vervet</td>
<td align="center">3.19</td>
</tr>
<tr>
<td align="center">15.10</td>
<td align="center">Wily Werewolf</td>
<td align="center">4.2</td>
</tr>
<tr>
<td align="center">16.04LTS</td>
<td align="center">Xenial Xerus</td>
<td align="center">4.4</td>
</tr>
<tr>
<td align="center">16.10</td>
<td align="center">Yakkety Yak</td>
<td align="center">4.8</td>
</tr>
<tr>
<td align="center">17.04</td>
<td align="center">Zesty Zapus</td>
<td align="center">4.10</td>
</tr>
<tr>
<td align="center">17.10</td>
<td align="center">Artful Aardvark</td>
<td align="center">4.13</td>
</tr>
<tr>
<td align="center">18.04LTS</td>
<td align="center">Bionic Beaver</td>
<td align="center">4.15</td>
</tr>
<tr>
<td align="center">18.10</td>
<td align="center">Cosmic Cuttlefish</td>
<td align="center">4.18</td>
</tr>
<tr>
<td align="center">19.04</td>
<td align="center">Disco Dingo</td>
<td align="center">5.0</td>
</tr>
<tr>
<td align="center">19.10</td>
<td align="center">Eoan Ermine</td>
<td align="center">5.3</td>
</tr>
<tr>
<td align="center"><a href="https://zh.wikipedia.org/wiki/Ubuntu发行版列表" target="_blank" rel="noopener">中文维基-Ubuntu发行版列表</a></td>
<td align="center"></td>
<td align="center"></td>
</tr>
</tbody></table>

        
    

    
</div>


                

                <!-- Post Comments -->
                
                    
    <!-- 使用 utteranc -->
<div id="utteranc-comment">
    <!-- Utteranc 评论框 -->

</div>
<script src="https://utteranc.es/client.js"
        repo= 'RomanArcher/RomanArcher.github.io'
        issue-term='pathname'
        label='comment✨💬✨'
        theme='github-light'
        crossorigin="anonymous"
        async>
</script>





                
            </div>

            <!-- Post Prev & Next Nav -->
            <nav class="material-nav mdl-color-text--grey-50 mdl-cell mdl-cell--12-col">
    <!-- Prev Nav -->
    
        <a href="/post/5092e38f.html" id="post_nav-newer" class="prev-content">
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_back</i>
            </button>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            新篇
        </a>
    

    <!-- Section Spacer -->
    <div class="section-spacer"></div>

    <!-- Next Nav -->
    
        <a href="/post/7d33fc70.html" id="post_nav-older" class="next-content">
            旧篇
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            <button class="mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon mdl-color--white mdl-color-text--grey-900" role="presentation">
                <i class="material-icons">arrow_forward</i>
            </button>
        </a>
    
</nav>

        </div>
    </div>



                    
                        <!-- Overlay For Active Sidebar -->
<div class="sidebar-overlay"></div>

<!-- Material sidebar -->
<aside id="sidebar" class="sidebar sidebar-colored sidebar-fixed-left" role="navigation">
    <div id="sidebar-main">
        <!-- Sidebar Header -->
        <div class="sidebar-header header-cover" style="background-image: url(/img/sidebar_header.png);">
    <!-- Top bar -->
    <div class="top-bar"></div>

    <!-- Sidebar toggle button -->
    <button type="button" class="sidebar-toggle mdl-button mdl-js-button mdl-js-ripple-effect mdl-button--icon" style="display: initial;" data-upgraded=",MaterialButton,MaterialRipple">
        <i class="material-icons">clear_all</i>
        <span class="mdl-button__ripple-container">
            <span class="mdl-ripple">
            </span>
        </span>
    </button>

    <!-- Sidebar Avatar -->
    <div class="sidebar-image">
        <img src="/img/avatar.png" alt="Roman's avatar">
    </div>

    <!-- Sidebar Email -->
    <a data-toggle="dropdown" class="sidebar-brand" href="#settings-dropdown">
        youremail@email.com
        <b class="caret"></b>
    </a>
</div>


        <!-- Sidebar Navigation  -->
        <ul class="nav sidebar-nav">
    <!-- User dropdown  -->
    <li class="dropdown">
        <ul id="settings-dropdown" class="dropdown-menu">
            
                <li>
                    <a href="#" target="_blank" title="Email Me">
                        
                            <i class="material-icons sidebar-material-icons sidebar-indent-left1pc-element">email</i>
                        
                        Email Me
                    </a>
                </li>
            
        </ul>
    </li>

    <!-- Homepage -->
    
        <li id="sidebar-first-li">
            <a href="/">
                
                    <i class="material-icons sidebar-material-icons">home</i>
                
                主页
            </a>
        </li>
        
    

    <!-- Archives  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">inbox</i>
                
                    归档
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
            <li>
                <a class="sidebar_archives-link" href="/archives/2020/07/">七月 2020<span class="sidebar_archives-count">2</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/11/">十一月 2019<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/archives/2019/10/">十月 2019<span class="sidebar_archives-count">5</span></a>
            </ul>
        </li>
        
    

    <!-- Categories  -->
    
        <li class="dropdown">
            <a href="#" class="ripple-effect dropdown-toggle" data-toggle="dropdown">
                
                    <i class="material-icons sidebar-material-icons">chrome_reader_mode</i>
                
                分类
                <b class="caret"></b>
            </a>
            <ul class="dropdown-menu">
                <li>
                <a class="sidebar_archives-link" href="/categories/Linux/">Linux<span class="sidebar_archives-count">4</span></a></li><li><a class="sidebar_archives-link" href="/categories/Windows/">Windows<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/hexo/">hexo<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/python/">python<span class="sidebar_archives-count">1</span></a></li><li><a class="sidebar_archives-link" href="/categories/安全漏洞/">安全漏洞<span class="sidebar_archives-count">3</span></a>
            </ul>
        </li>
        
    

    <!-- Pages  -->
    

    <!-- Article Number  -->
    
        <li>
            <a href="/archives">
                文章总数
                <span class="sidebar-badge">11</span>
            </a>
        </li>
        
    
</ul>


        <!-- Sidebar Footer -->
        <!--
I'm glad you use this theme, the development is no so easy, I hope you can keep the copyright, I will thank you so much.
If you still want to delete the copyrights, could you still retain the first one? Which namely "Theme Material"
It will not impact the appearance and can give developers a lot of support :)

很高兴您使用并喜欢该主题，开发不易 十分谢谢与希望您可以保留一下版权声明。
如果您仍然想删除的话 能否只保留第一项呢？即 "Theme Material"
它不会影响美观并可以给开发者很大的支持和动力。 :)
-->

<!-- Sidebar Divider -->

    <div class="sidebar-divider"></div>


<!-- Theme Material -->

    <a href="https://github.com/viosey/hexo-theme-material"  class="sidebar-footer-text-a" target="_blank">
        <div class="sidebar-text mdl-button mdl-js-button mdl-js-ripple-effect sidebar-footer-text-div" data-upgraded=",MaterialButton,MaterialRipple">
            主题 - Material
            <span class="sidebar-badge badge-circle">i</span>
        </div>
    </a>


<!-- Help & Support -->
<!--

-->

<!-- Feedback -->
<!--

-->

<!-- About Theme -->
<!--

-->

    </div>

    <!-- Sidebar Image -->
    

</aside>

                    

                    
                        <!-- Footer Top Button -->
                        <div id="back-to-top" class="toTop-wrap">
    <a href="#top" class="toTop">
        <i class="material-icons footer_top-i">expand_less</i>
    </a>
</div>

                    

                    <!--Footer-->
<footer class="mdl-mini-footer" id="bottom">
    
        <!-- Paradox Footer Left Section -->
        <div class="mdl-mini-footer--left-section sns-list">
    <!-- Twitter -->
    
        <a href="https://twitter.com/twitter" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-twitter">
                <span class="visuallyhidden">Twitter</span>
            </button><!--
     --></a>
    

    <!-- Facebook -->
    
        <a href="https://www.facebook.com/facebook" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-facebook">
                <span class="visuallyhidden">Facebook</span>
            </button><!--
     --></a>
    

    <!-- Google + -->
    
        <a href="https://www.google.com/" target="_blank">
            <button class="mdl-mini-footer--social-btn social-btn footer-sns-gplus">
                <span class="visuallyhidden">Google Plus</span>
            </button><!--
     --></a>
    

    <!-- Weibo -->
    

    <!-- Instagram -->
    

    <!-- Tumblr -->
    

    <!-- Github -->
    

    <!-- LinkedIn -->
    

    <!-- Zhihu -->
    

    <!-- Bilibili -->
    

    <!-- Telegram -->
    
    
    <!-- V2EX -->
    
</div>


        <!--Copyright-->
        <div id="copyright">
            Copyright&nbsp;©<script type="text/javascript">var fd = new Date();document.write("&nbsp;" + fd.getFullYear() + "&nbsp;");</script>Roman's blog
            
        </div>

        <!-- Paradox Footer Right Section -->

        <!--
        I am glad you use this theme, the development is no so easy, I hope you can keep the copyright.
        It will not impact the appearance and can give developers a lot of support :)

        很高兴您使用该主题，开发不易，希望您可以保留一下版权声明。
        它不会影响美观并可以给开发者很大的支持。 :)
        -->

        <div class="mdl-mini-footer--right-section">
            <div>
                <div class="footer-develop-div">Powered by <a href="https://hexo.io" target="_blank" class="footer-develop-a">Hexo</a></div>
                <div class="footer-develop-div">Theme - <a href="https://github.com/viosey/hexo-theme-material" target="_blank" class="footer-develop-a">Material</a></div>
            </div>
        </div>
    
</footer>


                    <!-- Import JS File -->

    <script>lsloader.load("lazyload_js","/js/lazyload.min.js?1BcfzuNXqV+ntF6gq+5X3Q==", true)</script>



    <script>lsloader.load("js_js","/js/js.min.js?V/53wGualMuiPM3xoetD5Q==", true)</script>



    <script>lsloader.load("np_js","/js/nprogress.js?pl3Qhb9lvqR1FlyLUna1Yw==", true)</script>


<script type="text/ls-javascript" id="NProgress-script">
    NProgress.configure({
        showSpinner: true
    });
    NProgress.start();
    $('#nprogress .bar').css({
        'background': '#29d'
    });
    $('#nprogress .peg').css({
        'box-shadow': '0 0 10px #29d, 0 0 15px #29d'
    });
    $('#nprogress .spinner-icon').css({
        'border-top-color': '#29d',
        'border-left-color': '#29d'
    });
    setTimeout(function() {
        NProgress.done();
        $('.fade').removeClass('out');
    }, 800);
</script>









   <!-- utteranc -->





<!-- UC Browser Compatible -->
<script>
	var agent = navigator.userAgent.toLowerCase();
	if(agent.indexOf('ucbrowser')>0) {
		document.write('<link rel="stylesheet" href="/css/uc.css">');
	   alert('由于 UC 浏览器使用极旧的内核，而本网站使用了一些新的特性。\n为了您能更好的浏览，推荐使用 Chrome 或 Firefox 浏览器。');
	}
</script>

<!-- Import prettify js  -->

    
        
            <script>lsloader.load("prettify_js","/js/prettify.min.js?WN07fivHQSMKWy7BmHBB6w==", true)</script>
        
    



<!-- Window Load -->
<!-- add class for prettify -->
<script type="text/ls-javascript" id="window-load">
    $(window).on('load', function() {
        // Post_Toc parent position fixed
        $('.post-toc-wrap').parent('.mdl-menu__container').css('position', 'fixed');
    });

    
        
            $(function() {
                $('pre').addClass('prettyprint linenums').attr('style', 'overflow:auto;');
                prettyPrint();
                })
        
    
    
</script>

<!-- MathJax Load-->


<!-- Bing Background -->


<script type="text/ls-javascript" id="lazy-load">
    // Offer LazyLoad
    queue.offer(function(){
        $('.lazy').lazyload({
            effect : 'show'
        });
    });

    // Start Queue
    $(document).ready(function(){
        setInterval(function(){
            queue.execNext();
        },200);
    });
</script>

<!-- Custom Footer -->



<script>
    (function(){
        var scriptList = document.querySelectorAll('script[type="text/ls-javascript"]')

        for (var i = 0; i < scriptList.length; ++i) {
            var item = scriptList[i];
            lsloader.runInlineScript(item.id,item.id);
        }
    })()
console.log('\n %c © Material Theme | Version: 1.5.0 | https://github.com/viosey/hexo-theme-material %c \n', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-left-radius:5px;border-bottom-left-radius:5px;', 'color:#455a64;background:#e0e0e0;padding:5px 0;border-top-right-radius:5px;border-bottom-right-radius:5px;');
</script>

                </main>
            </div>
        </body>
    
</html>
